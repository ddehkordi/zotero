!function t(e,n,r){var o="function"==typeof hypothesisRequire&&hypothesisRequire;function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof hypothesisRequire&&hypothesisRequire;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){var n=e[a][1][t];return i(n||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(t){return!0}e.exports=function(t,e){var n=[];e=e||r;do{n.push(t),t=t.parentNode}while(t&&t.tagName&&e(t));return n.slice(1)}},{}],2:[function(t,e,n){(function(t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var i=typeof o;if("string"===i||"number"===i)t.push(o);else if(Array.isArray(o)&&o.length){var a=r.apply(null,o);a&&t.push(a)}else if("object"===i)for(var s in o)n.call(o,s)&&o[s]&&t.push(s)}}return t.join(" ")}void 0!==e&&e.exports?(r.default=r,e.exports=r):"function"==typeof t&&"object"==typeof t.amd&&t.amd?t("classnames",[],(function(){return r})):window.classNames=r}()}).call(this,void 0)},{}],3:[function(t,e,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,window)},{}],4:[function(t,e,n){function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var o=-1;r.Diff,r.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var i=n,a=this.diff_commonPrefix(t,e),s=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var u=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var l=this.diff_compute_(t,e,i,o);return s&&l.unshift([0,s]),u&&l.push([0,u]),this.diff_cleanupMerge(l),l},r.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[o,t]];var a=t.length>e.length?t:e,s=t.length>e.length?e:t,u=a.indexOf(s);if(-1!=u)return i=[[1,a.substring(0,u)],[0,s],[1,a.substring(u+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=o),i;if(1==s.length)return[[o,t],[1,e]];var l=this.diff_halfMatch_(t,e);if(l){var c=l[0],f=l[1],h=l[2],d=l[3],p=l[4],g=this.diff_main(c,h,n,r),v=this.diff_main(f,d,n,r);return g.concat([[0,p]],v)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},r.prototype.diff_lineMode_=function(t,e,n){t=(f=this.diff_linesToChars_(t,e)).chars1,e=f.chars2;var r=f.lineArray,i=this.diff_main(t,e,!1,n);this.diff_charsToLines_(i,r),this.diff_cleanupSemantic(i),i.push([0,""]);for(var a=0,s=0,u=0,l="",c="";a<i.length;){switch(i[a][0]){case 1:u++,c+=i[a][1];break;case o:s++,l+=i[a][1];break;case 0:if(s>=1&&u>=1){i.splice(a-s-u,s+u),a=a-s-u;for(var f,h=(f=this.diff_main(l,c,!1,n)).length-1;h>=0;h--)i.splice(a,0,f[h]);a+=f.length}u=0,s=0,l="",c=""}a++}return i.pop(),i},r.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,a=Math.ceil((r+i)/2),s=a,u=2*a,l=new Array(u),c=new Array(u),f=0;f<u;f++)l[f]=-1,c[f]=-1;l[s+1]=0,c[s+1]=0;for(var h=r-i,d=h%2!=0,p=0,g=0,v=0,m=0,y=0;y<a&&!((new Date).getTime()>n);y++){for(var _=-y+p;_<=y-g;_+=2){for(var b=s+_,w=(T=_==-y||_!=y&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1)-_;T<r&&w<i&&t.charAt(T)==e.charAt(w);)T++,w++;if(l[b]=T,T>r)g+=2;else if(w>i)p+=2;else if(d&&(x=s+h-_)>=0&&x<u&&-1!=c[x]&&T>=(S=r-c[x]))return this.diff_bisectSplit_(t,e,T,w,n)}for(var E=-y+v;E<=y-m;E+=2){for(var S,x=s+E,O=(S=E==-y||E!=y&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-E;S<r&&O<i&&t.charAt(r-S-1)==e.charAt(i-O-1);)S++,O++;if(c[x]=S,S>r)m+=2;else if(O>i)v+=2;else if(!d){var T;if((b=s+h-E)>=0&&b<u&&-1!=l[b])if(w=s+(T=l[b])-b,T>=(S=r-S))return this.diff_bisectSplit_(t,e,T,w,n)}}}return[[o,t],[1,e]]},r.prototype.diff_bisectSplit_=function(t,e,n,r,o){var i=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),u=e.substring(r),l=this.diff_main(i,a,!1,o),c=this.diff_main(s,u,!1,o);return l.concat(c)},r.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function o(t){for(var e="",o=0,i=-1,a=n.length;i<t.length-1;){-1==(i=t.indexOf("\n",o))&&(i=t.length-1);var s=t.substring(o,i+1);o=i+1,(r.hasOwnProperty?r.hasOwnProperty(s):void 0!==r[s])?e+=String.fromCharCode(r[s]):(e+=String.fromCharCode(a),r[s]=a,n[a++]=s)}return e}return n[0]="",{chars1:o(t),chars2:o(e),lineArray:n}},r.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],o=[],i=0;i<r.length;i++)o[i]=e[r.charCodeAt(i)];t[n][1]=o.join("")}},r.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)==e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},r.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},r.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var o=Math.min(n,r);if(t==e)return o;for(var i=0,a=1;;){var s=t.substring(o-a),u=e.indexOf(s);if(-1==u)return i;a+=u,0!=u&&t.substring(o-a)!=e.substring(0,a)||(i=a,a++)}},r.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var o=this;function i(t,e,n){for(var r,i,a,s,u=t.substring(n,n+Math.floor(t.length/4)),l=-1,c="";-1!=(l=e.indexOf(u,l+1));){var f=o.diff_commonPrefix(t.substring(n),e.substring(l)),h=o.diff_commonSuffix(t.substring(0,n),e.substring(0,l));c.length<h+f&&(c=e.substring(l-h,l)+e.substring(l,l+f),r=t.substring(0,n-h),i=t.substring(n+f),a=e.substring(0,l-h),s=e.substring(l+f))}return 2*c.length>=t.length?[r,i,a,s,c]:null}var a,s,u,l,c,f=i(n,r,Math.ceil(n.length/4)),h=i(n,r,Math.ceil(n.length/2));return f||h?(a=h?f&&f[4].length>h[4].length?f:h:f,t.length>e.length?(s=a[0],u=a[1],l=a[2],c=a[3]):(l=a[0],c=a[1],s=a[2],u=a[3]),[s,u,l,c,a[4]]):null},r.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,a=0,s=0,u=0,l=0,c=0;a<t.length;)0==t[a][0]?(n[r++]=a,s=l,u=c,l=0,c=0,i=t[a][1]):(1==t[a][0]?l+=t[a][1].length:c+=t[a][1].length,i&&i.length<=Math.max(s,u)&&i.length<=Math.max(l,c)&&(t.splice(n[r-1],0,[o,i]),t[n[r-1]+1][0]=1,r--,a=--r>0?n[r-1]:-1,s=0,u=0,l=0,c=0,i=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==o&&1==t[a][0]){var f=t[a-1][1],h=t[a][1],d=this.diff_commonOverlap_(f,h),p=this.diff_commonOverlap_(h,f);d>=p?(d>=f.length/2||d>=h.length/2)&&(t.splice(a,0,[0,h.substring(0,d)]),t[a-1][1]=f.substring(0,f.length-d),t[a+1][1]=h.substring(d),a++):(p>=f.length/2||p>=h.length/2)&&(t.splice(a,0,[0,f.substring(0,p)]),t[a-1][0]=1,t[a-1][1]=h.substring(0,h.length-p),t[a+1][0]=o,t[a+1][1]=f.substring(p),a++),a++}a++}},r.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),o=e.charAt(0),i=n.match(r.nonAlphaNumericRegex_),a=o.match(r.nonAlphaNumericRegex_),s=i&&n.match(r.whitespaceRegex_),u=a&&o.match(r.whitespaceRegex_),l=s&&n.match(r.linebreakRegex_),c=u&&o.match(r.linebreakRegex_),f=l&&t.match(r.blanklineEndRegex_),h=c&&e.match(r.blanklineStartRegex_);return f||h?5:l||c?4:i&&!s&&u?3:s||u?2:i||a?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var o=t[n-1][1],i=t[n][1],a=t[n+1][1],s=this.diff_commonSuffix(o,i);if(s){var u=i.substring(i.length-s);o=o.substring(0,o.length-s),i=u+i.substring(0,i.length-s),a=u+a}for(var l=o,c=i,f=a,h=e(o,i)+e(i,a);i.charAt(0)===a.charAt(0);){o+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var d=e(o,i)+e(i,a);d>=h&&(h=d,l=o,c=i,f=a)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,a=0,s=!1,u=!1,l=!1,c=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.Diff_EditCost&&(l||c)?(n[r++]=a,s=l,u=c,i=t[a][1]):(r=0,i=null),l=c=!1):(t[a][0]==o?c=!0:l=!0,i&&(s&&u&&l&&c||i.length<this.Diff_EditCost/2&&s+u+l+c==3)&&(t.splice(n[r-1],0,[o,i]),t[n[r-1]+1][0]=1,r--,i=null,s&&u?(l=c=!0,r=0):(a=--r>0?n[r-1]:-1,l=c=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},r.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,a="",s="";n<t.length;)switch(t[n][0]){case 1:i++,s+=t[n][1],n++;break;case o:r++,a+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(0!==(e=this.diff_commonPrefix(s,a))&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(s,a))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),a=a.substring(0,a.length-e))),0===r?t.splice(n-i,r+i,[1,s]):0===i?t.splice(n-r,r+i,[o,a]):t.splice(n-r-i,r+i,[o,a],[1,s]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,a="",s=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),u=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(t)},r.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,a=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),t[n][0]!==o&&(i+=t[n][1].length),!(r>e));n++)a=r,s=i;return t.length!=n&&t[n][0]===o?s:s+(e-a)},r.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,a=/\n/g,s=0;s<t.length;s++){var u=t[s][0],l=t[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(a,"&para;<br>");switch(u){case 1:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case o:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},r.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==o&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var a=t[i][0],s=t[i][1];switch(a){case 1:n+=s.length;break;case o:r+=s.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+Math.max(n,r)},r.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case o:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,a=e.split(/\t/g),s=0;s<a.length;s++){var u=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{n[r++]=[1,decodeURI(u)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var l=parseInt(u,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+u);var c=t.substring(i,i+=l);"="==a[s].charAt(0)?n[r++]=[0,c]:n[r++]=[o,c];break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},r.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},r.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this;function i(t,r){var i=t/e.length,a=Math.abs(n-r);return o.Match_Distance?i+a/o.Match_Distance:a?1:i}var a=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(a=Math.min(i(0,s),a),-1!=(s=t.lastIndexOf(e,n+e.length))&&(a=Math.min(i(0,s),a)));var u,l,c=1<<e.length-1;s=-1;for(var f,h=e.length+t.length,d=0;d<e.length;d++){for(u=0,l=h;u<l;)i(d,n+l)<=a?u=l:h=l,l=Math.floor((h-u)/2+u);h=l;var p=Math.max(1,n-l+1),g=Math.min(n+l,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<d)-1;for(var m=g;m>=p;m--){var y=r[t.charAt(m-1)];if(v[m]=0===d?(v[m+1]<<1|1)&y:(v[m+1]<<1|1)&y|(f[m+1]|f[m])<<1|1|f[m+1],v[m]&c){var _=i(d,m-1);if(_<=a){if(a=_,!((s=m-1)>n))break;p=Math.max(1,2*n-s)}}}if(i(d+1,n)>a)break;f=v}return s},r.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},r.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var o=e.substring(t.start2-r,t.start2);o&&t.diffs.unshift([0,o]);var i=e.substring(t.start2+t.length1,t.start2+t.length1+r);i&&t.diffs.push([0,i]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+i.length,t.length2+=o.length+i.length}},r.prototype.patch_make=function(t,e,n){var i,a;if("string"==typeof t&&"string"==typeof e&&void 0===n)i=t,(a=this.diff_main(i,e,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)a=t,i=this.diff_text1(a);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)i=t,a=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");i=t,a=n}if(0===a.length)return[];for(var s=[],u=new r.patch_obj,l=0,c=0,f=0,h=i,d=i,p=0;p<a.length;p++){var g=a[p][0],v=a[p][1];switch(l||0===g||(u.start1=c,u.start2=f),g){case 1:u.diffs[l++]=a[p],u.length2+=v.length,d=d.substring(0,f)+v+d.substring(f);break;case o:u.length1+=v.length,u.diffs[l++]=a[p],d=d.substring(0,f)+d.substring(f+v.length);break;case 0:v.length<=2*this.Patch_Margin&&l&&a.length!=p+1?(u.diffs[l++]=a[p],u.length1+=v.length,u.length2+=v.length):v.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(u,h),s.push(u),u=new r.patch_obj,l=0,h=d,c=f)}1!==g&&(c+=v.length),g!==o&&(f+=v.length)}return l&&(this.patch_addContext_(u,h),s.push(u)),s},r.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n],i=new r.patch_obj;i.diffs=[];for(var a=0;a<o.diffs.length;a++)i.diffs[a]=o.diffs[a].slice();i.start1=o.start1,i.start2=o.start2,i.length1=o.length1,i.length2=o.length2,e[n]=i}return e},r.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],a=0;a<t.length;a++){var s,u,l=t[a].start2+r,c=this.diff_text1(t[a].diffs),f=-1;if(c.length>this.Match_MaxBits?-1!=(s=this.match_main(e,c.substring(0,this.Match_MaxBits),l))&&(-1==(f=this.match_main(e,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits))||s>=f)&&(s=-1):s=this.match_main(e,c,l),-1==s)i[a]=!1,r-=t[a].length2-t[a].length1;else if(i[a]=!0,r=s-l,c==(u=-1==f?e.substring(s,s+c.length):e.substring(s,f+this.Match_MaxBits)))e=e.substring(0,s)+this.diff_text2(t[a].diffs)+e.substring(s+c.length);else{var h=this.diff_main(c,u,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(h)/c.length>this.Patch_DeleteThreshold)i[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var d,p=0,g=0;g<t[a].diffs.length;g++){var v=t[a].diffs[g];0!==v[0]&&(d=this.diff_xIndex(h,p)),1===v[0]?e=e.substring(0,s+d)+v[1]+e.substring(s+d):v[0]===o&&(e=e.substring(0,s+d)+e.substring(s+this.diff_xIndex(h,p+v[1].length))),v[0]!==o&&(p+=v[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),i]},r.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var o=t[0],i=o.diffs;if(0==i.length||0!=i[0][0])i.unshift([0,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>i[0][1].length){var a=e-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}return 0==(i=(o=t[t.length-1]).diffs).length||0!=i[i.length-1][0]?(i.push([0,n]),o.length1+=e,o.length2+=e):e>i[i.length-1][1].length&&(a=e-i[i.length-1][1].length,i[i.length-1][1]+=n.substring(0,a),o.length1+=a,o.length2+=a),n},r.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var a=i.start1,s=i.start2,u="";0!==i.diffs.length;){var l=new r.patch_obj,c=!0;for(l.start1=a-u.length,l.start2=s-u.length,""!==u&&(l.length1=l.length2=u.length,l.diffs.push([0,u]));0!==i.diffs.length&&l.length1<e-this.Patch_Margin;){var f=i.diffs[0][0],h=i.diffs[0][1];1===f?(l.length2+=h.length,s+=h.length,l.diffs.push(i.diffs.shift()),c=!1):f===o&&1==l.diffs.length&&0==l.diffs[0][0]&&h.length>2*e?(l.length1+=h.length,a+=h.length,c=!1,l.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,e-l.length1-this.Patch_Margin),l.length1+=h.length,a+=h.length,0===f?(l.length2+=h.length,s+=h.length):c=!1,l.diffs.push([f,h]),h==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}u=(u=this.diff_text2(l.diffs)).substring(u.length-this.Patch_Margin);var d=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==d&&(l.length1+=d.length,l.length2+=d.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=d:l.diffs.push([0,d])),c||t.splice(++n,0,l)}}},r.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},r.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var s=n[i].match(a);if(!s)throw new Error("Invalid patch string: "+n[i]);var u=new r.patch_obj;for(e.push(u),u.start1=parseInt(s[1],10),""===s[2]?(u.start1--,u.length1=1):"0"==s[2]?u.length1=0:(u.start1--,u.length1=parseInt(s[2],10)),u.start2=parseInt(s[3],10),""===s[4]?(u.start2--,u.length2=1):"0"==s[4]?u.length2=0:(u.start2--,u.length2=parseInt(s[4],10)),i++;i<n.length;){var l=n[i].charAt(0);try{var c=decodeURI(n[i].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==l)u.diffs.push([o,c]);else if("+"==l)u.diffs.push([1,c]);else if(" "==l)u.diffs.push([0,c]);else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}i++}}return e},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case o:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},e.exports=r,e.exports.diff_match_patch=r,e.exports.DIFF_DELETE=o,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},{}],5:[function(t,e,n){e.exports=function(){var t=document.baseURI;if(!t)for(var e=document.getElementsByTagName("base"),n=0;n<e.length;n++)if(e[n].href){t=e[n].href;break}return t||document.documentURI}()},{}],6:[function(t,e,n){e.exports=t("./lib")},{"./lib":7}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');var n=t.ownerDocument.createRange(),r=e.startContainer,i=e.startOffset;n.setStart(t,0),n.setEnd(r,i);var a=(0,o.default)(n).length;return{start:a,end:a+(0,o.default)(e).length}},n.toRange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===t)throw new Error('missing required parameter "root"');var n=t.ownerDocument,o=n.createRange(),i=n.createNodeIterator(t,4),a=e.start||0,s=e.end||a,u=a-(0,r.default)(i,a),l=i.referenceNode,c=s-a+u,f=c-(0,r.default)(i,c),h=i.referenceNode;return o.setStart(l,u),o.setEnd(h,f),o};var r=i(t("dom-seek")),o=i(t("./range-to-string"));function i(t){return t&&t.__esModule?t:{default:t}}},{"./range-to-string":8,"dom-seek":29}],8:[function(t,e,n){"use strict";function r(t,e){if(!e&&t.firstChild)return t.firstChild;do{if(t.nextSibling)return t.nextSibling;t=t.parentNode}while(t);return t}function o(t,e){for(var n=function(t){return t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer.childNodes[t.startOffset]||r(t.startContainer,!0):t.startContainer}(t),o=function(t){return t.endContainer.nodeType===Node.ELEMENT_NODE?t.endContainer.childNodes[t.endOffset]||r(t.endContainer,!0):r(t.endContainer)}(t);n!==o;)e(n),n=r(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e="";return o(t,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n===t.startContainer?t.startOffset:0,o=n===t.endContainer?t.endOffset:n.textContent.length;e+=n.textContent.slice(r,o)}})),e}},{}],9:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./lib":10,dup:6}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');return u(t,a.fromRange(t,e))},n.fromTextPosition=u,n.toRange=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l(t,e,n);return null===r?null:a.toRange(t,r)},n.toTextPosition=l;var r,o=t("diff-match-patch"),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("dom-anchor-text-position"));var s=new RegExp("(.|[\r\n]){1,"+String(32)+"}","g");function u(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var n=e.start;if(void 0===n)throw new Error('selector missing required property "start"');if(n<0)throw new Error('property "start" must be a non-negative integer');var r=e.end;if(void 0===r)throw new Error('selector missing required property "end"');if(r<0)throw new Error('property "end" must be a non-negative integer');var o=t.textContent.substr(n,r-n),i=Math.max(0,n-32),a=t.textContent.substr(i,n-i),s=Math.min(t.textContent.length,r+32);return{exact:o,prefix:a,suffix:t.textContent.substr(r,s-r)}}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var r=e.exact;if(void 0===r)throw new Error('selector missing required property "exact"');var o=e.prefix,a=e.suffix,u=n.hint,l=new i.default;l.Match_Distance=2*t.textContent.length;var c=r.match(s),f=void 0===u?t.textContent.length/2|0:u,h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,p=-1,g=void 0!==o,v=void 0!==a,m=!1;g&&(p=l.match_main(t.textContent,o,f))>-1&&(f=p+o.length,m=!0),v&&!m&&(p=l.match_main(t.textContent,a,f+r.length))>-1&&(f=p-r.length);var y=c.shift();if(!((p=l.match_main(t.textContent,y,f))>-1))return null;f=d=(h=p)+y.length;var _=function(e,n){if(!e)return null;var r=l.match_main(t.textContent,n,e.loc);return-1===r?null:(e.loc=r+n.length,e.start=Math.min(e.start,r),e.end=Math.max(e.end,r+n.length),e)};l.Match_Distance=64;var b=c.reduce(_,{start:h,end:d,loc:f});return b?{start:b.start,end:b.end}:null}},{"diff-match-patch":4,"dom-anchor-text-position":11}],11:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./lib":12,dup:6}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');var n=t.ownerDocument.createRange(),r=e.startContainer,o=e.startOffset;n.setStart(t,0),n.setEnd(r,o);var a=(0,i.default)(n).length;return{start:a,end:a+(0,i.default)(e).length}},n.toRange=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0===t)throw new Error('missing required parameter "root"');var n=t.ownerDocument,i=n.createRange(),a=(0,r.default)(t,4),s=e.start||0,u=e.end||s,l=(0,o.default)(a,s),c=s-l;a.pointerBeforeReferenceNode?i.setStart(a.referenceNode,c):(i.setStart(a.nextNode(),c),a.previousNode());var f=u-s+c;return c=f-(l=(0,o.default)(a,f)),a.pointerBeforeReferenceNode?i.setEnd(a.referenceNode,c):i.setEnd(a.nextNode(),c),i};var r=a(t("dom-node-iterator")),o=a(t("dom-seek")),i=a(t("./range-to-string"));function a(t){return t&&t.__esModule?t:{default:t}}},{"./range-to-string":13,"dom-node-iterator":15,"dom-seek":24}],13:[function(t,e,n){"use strict";function r(t,e){if(!e&&t.firstChild)return t.firstChild;do{if(t.nextSibling)return t.nextSibling;t=t.parentNode}while(t);return t}function o(t,e){for(var n=function(t){return t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer.childNodes[t.startOffset]||r(t.startContainer,!0):t.startContainer}(t),o=function(t){return t.endContainer.nodeType===Node.ELEMENT_NODE?t.endContainer.childNodes[t.endOffset]||r(t.endContainer,!0):r(t.endContainer)}(t);n!==o;)e(n),n=r(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e="";return o(t,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n===t.startContainer?t.startOffset:0,o=n===t.endContainer?t.endOffset:n.textContent.length;e+=n.textContent.slice(r,o)}})),e}},{}],14:[function(t,e,n){e.exports=t("./lib/implementation").default},{"./lib/implementation":18}],15:[function(t,e,n){e.exports=t("./lib").default,e.exports.getPolyfill=t("./polyfill"),e.exports.implementation=t("./implementation"),e.exports.shim=t("./shim")},{"./implementation":14,"./lib":19,"./polyfill":22,"./shim":23}],16:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=9==t.nodeType||t.ownerDocument,i=o.createNodeIterator(t,e,n,!1);return new r(i,t,e,n)};var r=function(){function t(e,n,r,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=n,this.whatToShow=r,this.filter=o,this.referenceNode=n,this.pointerBeforeReferenceNode=!0,this._iter=e}return t.prototype.nextNode=function(){var t=this._iter.nextNode();return this.pointerBeforeReferenceNode=!1,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.previousNode=function(){var t=this._iter.previousNode();return this.pointerBeforeReferenceNode=!0,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],17:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=t.ownerDocument;return r.createNodeIterator.call(r,t,e,n)}},{}],18:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return new r(t,e,n)};var r=function(){function t(e,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=e,this.whatToShow=n,this.filter=r,this.referenceNode=e,this.pointerBeforeReferenceNode=!0,this._filter=function(t){return!r||1===r(t)},this._show=function(t){return n>>t.nodeType-1&!0}}return t.prototype.nextNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!1;var e=this.referenceNode;if(t&&this._show(e)&&this._filter(e))return e;do{if(e.firstChild)e=e.firstChild;else{do{if(e===this.root)return null;if(e.nextSibling)break;e=e.parentNode}while(e);e=e.nextSibling}}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!1,e},t.prototype.previousNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!0;var e=this.referenceNode;if(!t&&this._show(e)&&this._filter(e))return e;do{if(e===this.root)return null;if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!0,e},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],19:[function(t,e,n){"use strict";n.__esModule=!0;var r=a(t("./polyfill")),o=a(t("./implementation")),i=a(t("./shim"));function a(t){return t&&t.__esModule?t:{default:t}}var s=(0,r.default)();s.implementation=o.default,s.shim=i.default,n.default=s},{"./implementation":18,"./polyfill":20,"./shim":21}],20:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){try{var t="undefined"==typeof document?{}:document;return(0,o.default)(t,4294967295,null,!1).referenceNode===t?o.default:r.default}catch(t){return i.default}};var r=a(t("./adapter")),o=a(t("./builtin")),i=a(t("./implementation"));function a(t){return t&&t.__esModule?t:{default:t}}},{"./adapter":16,"./builtin":17,"./implementation":18}],21:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){var t="undefined"==typeof document?{}:document,e=(0,o.default)();return e!==r.default&&(t.createNodeIterator=e),e};var r=i(t("./builtin")),o=i(t("./polyfill"));function i(t){return t&&t.__esModule?t:{default:t}}},{"./builtin":17,"./polyfill":20}],22:[function(t,e,n){e.exports=t("./lib/polyfill").default},{"./lib/polyfill":20}],23:[function(t,e,n){e.exports=t("./lib/shim").default},{"./lib/shim":21}],24:[function(t,e,n){e.exports=t("./lib").default},{"./lib":25}],25:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){if(4!==t.whatToShow)throw new Error("Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.");var n=0,r=t.referenceNode,o=null;if(function(t){return!isNaN(parseInt(t))&&isFinite(t)}(e))o={forward:function(){return n<e},backward:function(){return n>e}};else{if(!function(t){return 3===t.nodeType}(e))throw new Error("Argument 2 of seek must be a number or a Text Node.");o={forward:a(r,e)?function(){return!1}:function(){return r!==e},backward:function(){return r!=e||!t.pointerBeforeReferenceNode}}}for(;o.forward()&&null!==(r=t.nextNode());)n+=r.nodeValue.length;for(;o.backward()&&null!==(r=t.previousNode());)n-=r.nodeValue.length;return n};var r=i(t("ancestors")),o=i(t("index-of"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(t===e)return!1;for(var n=null,i=[t].concat((0,r.default)(t)).reverse(),a=[e].concat((0,r.default)(e)).reverse();i[0]===a[0];)n=i.shift(),a.shift();return i=i[0],a=a[0],(0,o.default)(n.childNodes,i)>(0,o.default)(n.childNodes,a)}},{ancestors:1,"index-of":33}],26:[function(t,e,n){"use strict";e.exports=t("./lib/implementation").default},{"./lib/implementation":27}],27:[function(t,e,n){"use strict";var r,o;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;if("function"==typeof c){var o=c(r,t,e,n,!1),i=u(o),a=s(i,"referenceNode");return void 0===a?p(o):o}return d(t,e,n)};n.default=i;var a=Object.create.bind(Object),s=Object.getOwnPropertyDescriptor.bind(Object),u=Object.getPrototypeOf.bind(Object),l=null===(r=Document)||void 0===r||null===(o=r.prototype)||void 0===o?void 0:o.createNodeIterator,c=l&&Function.prototype.call.bind(l);function f(t,e){if(t.firstChild)return t.firstChild;for(;t!==e;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function h(t,e){if(t===e)return null;if(t.previousSibling){for(t=t.previousSibling;t.lastChild;)t=t.lastChild;return t}return t.parentNode}function d(t,e,n){var r={referenceNode:t,pointerBeforeReferenceNode:!0};function o(t){return!n||1===n(t)}function i(t){return e>>t.nodeType-1&!0}return a({},{root:{value:t},referenceNode:{get:function(){return r.referenceNode}},pointerBeforeReferenceNode:{get:function(){return r.pointerBeforeReferenceNode}},whatToShow:{value:e},filter:{value:n},nextNode:{value:function(){for(var e=r.referenceNode,n=r.pointerBeforeReferenceNode;;){if(n?n=!1:e=f(e,t),null===e)return null;if(i(e)&&o(e))break}return r.referenceNode=e,r.pointerBeforeReferenceNode=n,e}},previousNode:{value:function(){for(var t=r.pointerBeforeReferenceNode,e=r.referenceNode;;){if(t?e=h(e,r.root):t=!0,null===e)return null;if(i(e)&&o(e))break}return r.referenceNode=e,r.pointerBeforeReferenceNode=t,e}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}})}function p(t){var e={referenceNode:t.root,pointerBeforeReferenceNode:!0},n=u(t),r=a(n,{root:{get:function(){return t.root}},referenceNode:{get:function(){return e.referenceNode}},pointerBeforeReferenceNode:{get:function(){return e.pointerBeforeReferenceNode}},whatToShow:{get:function(){return t.whatToShow}},filter:{get:function(){return t.filter}},nextNode:{value:function(){var n=t.nextNode();return null===n?null:(e.referenceNode=n,e.pointerBeforeReferenceNode=!1,e.referenceNode)}},previousNode:{value:function(){var n=t.previousNode();return null===n?null:(e.referenceNode=n,e.pointerBeforeReferenceNode=!0,e.referenceNode)}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}});return a(r)}},{}],28:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return r}},{"./implementation":26}],29:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./lib":30,dup:24}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){if(4!==t.whatToShow){var n;try{n=new DOMException(o,"InvalidStateError")}catch(t){(n=new Error(o)).code=11,n.name="InvalidStateError",n.toString=function(){return"InvalidStateError: ".concat(o)}}throw n}var s=0,u=t.referenceNode,l=null;if(function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}(e))l={forward:function(){return s<e},backward:function(){return s>e||!t.pointerBeforeReferenceNode}};else{if(!i(e))throw new TypeError("Argument 2 of seek must be an integer or a Text Node.");l={forward:a(u,e)?function(){return!1}:function(){return u!==e},backward:function(){return u!==e||!t.pointerBeforeReferenceNode}}}for(;l.forward();){if(null===(u=t.nextNode()))throw new RangeError(r);s+=u.nodeValue.length}for(t.nextNode()&&(u=t.previousNode());l.backward();){if(null===(u=t.previousNode()))throw new RangeError(r);s-=u.nodeValue.length}if(!i(t.referenceNode))throw new RangeError(r);return s};var r="Iterator exhausted before seek ended.",o="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.";function i(t){return 3===t.nodeType}function a(t,e){return 2&t.compareDocumentPosition(e)}},{}],31:[function(t,e,n){(function(t){var r;r=function(){"use strict";function t(t){var e=!0,n=!1,r=null,o={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function a(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function s(t){e=!1}function u(){document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("mouseup",l),document.addEventListener("pointermove",l),document.addEventListener("pointerdown",l),document.addEventListener("pointerup",l),document.addEventListener("touchmove",l),document.addEventListener("touchstart",l),document.addEventListener("touchend",l)}function l(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",l),document.removeEventListener("pointermove",l),document.removeEventListener("pointerdown",l),document.removeEventListener("pointerup",l),document.removeEventListener("touchmove",l),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",l))}document.addEventListener("keydown",(function(n){n.metaKey||n.altKey||n.ctrlKey||(i(t.activeElement)&&a(t.activeElement),e=!0)}),!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerdown",s,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("visibilitychange",(function(t){"hidden"===document.visibilityState&&(n&&(e=!0),u())}),!0),u(),t.addEventListener("focus",(function(t){var n,r,s;i(t.target)&&(e||(r=(n=t.target).type,"INPUT"===(s=n.tagName)&&o[r]&&!n.readOnly||"TEXTAREA"===s&&!n.readOnly||n.isContentEditable))&&a(t.target)}),!0),t.addEventListener("blur",(function(t){var e;i(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(r),r=window.setTimeout((function(){n=!1}),100),(e=t.target).hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added")))}),!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var e;window.applyFocusVisiblePolyfill=t;try{e=new CustomEvent("focus-visible-polyfill-ready")}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(e)}"undefined"!=typeof document&&t(document)},"object"==typeof n&&void 0!==e?r():"function"==typeof t&&t.amd?t(r):r()}).call(this,void 0)},{}],32:[function(t,e,n){(function(t){
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(n,r,o,i){"use strict";var a,s=["","webkit","Moz","MS","ms","o"],u=r.createElement("div"),l=Math.round,c=Math.abs,f=Date.now;function h(t,e,n){return setTimeout(_(t,n),e)}function d(t,e,n){return!!Array.isArray(t)&&(p(t,n[e],n),!0)}function p(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function g(t,e,r){var o="DEPRECATED METHOD: "+e+"\n"+r+" AT \n";return function(){var e=new Error("get-stack-trace"),r=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=n.console&&(n.console.warn||n.console.log);return i&&i.call(n.console,o,r),t.apply(this,arguments)}}a="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}:Object.assign;var v=g((function(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&t[r[o]]===i)&&(t[r[o]]=e[r[o]]),o++;return t}),"extend","Use `assign`."),m=g((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function y(t,e,n){var r,o=e.prototype;(r=t.prototype=Object.create(o)).constructor=t,r._super=o,n&&a(r,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return"function"==typeof t?t.apply(e&&e[0]||i,e):t}function w(t,e){return t===i?e:t}function E(t,e,n){p(T(e),(function(e){t.addEventListener(e,n,!1)}))}function S(t,e,n){p(T(e),(function(e){t.removeEventListener(e,n,!1)}))}function x(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function O(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function C(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function N(t){return Array.prototype.slice.call(t,0)}function A(t,e,n){for(var r=[],o=[],i=0;i<t.length;){var a=e?t[i][e]:t[i];C(o,a)<0&&r.push(t[i]),o[i]=a,i++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function k(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((r=(n=s[a])?n+o:e)in t)return r;a++}return i}var P=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var j="ontouchstart"in n,M=k(n,"PointerEvent")!==i,D=j&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I="touch",L="mouse",F=["x","y"],q=["clientX","clientY"];function B(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function H(t,e,n){var r=n.pointers.length,o=n.changedPointers.length,a=1&e&&r-o==0,s=12&e&&r-o==0;n.isFirst=!!a,n.isFinal=!!s,a&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,o=r.length;n.firstInput||(n.firstInput=U(e)),o>1&&!n.firstMultiple?n.firstMultiple=U(e):1===o&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,u=s?s.center:a.center,l=e.center=V(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=$(u,l),e.distance=X(u,l),function(t,e){var n=e.center,r=t.offsetDelta||{},o=t.prevDelta||{},i=t.prevInput||{};1!==e.eventType&&4!==i.eventType||(o=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-r.x),e.deltaY=o.y+(n.y-r.y)}(n,e),e.offsetDirection=W(e.deltaX,e.deltaY);var h,d,p=z(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=s?(h=s.pointers,X((d=r)[0],d[1],q)/X(h[0],h[1],q)):1,e.rotation=s?function(t,e){return $(e[1],e[0],q)+$(t[1],t[0],q)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,o,a,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(u>25||s.velocity===i)){var l=e.deltaX-s.deltaX,f=e.deltaY-s.deltaY,h=z(u,l,f);r=h.x,o=h.y,n=c(h.x)>c(h.y)?h.x:h.y,a=W(l,f),t.lastInterval=e}else n=s.velocity,r=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=a}(n,e);var g=t.element;x(e.srcEvent.target,g)&&(g=e.srcEvent.target),e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function U(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:V(e),deltaX:t.deltaX,deltaY:t.deltaY}}function V(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,o=0;o<e;)n+=t[o].clientX,r+=t[o].clientY,o++;return{x:l(n/e),y:l(r/e)}}function z(t,e,n){return{x:e/t||0,y:n/t||0}}function W(t,e){return t===e?1:c(t)>=c(e)?t<0?2:4:e<0?8:16}function X(t,e,n){n||(n=F);var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(r*r+o*o)}function $(t,e,n){n||(n=F);var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,r)/Math.PI}B.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(R(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4},G="mousedown",Q="mousemove mouseup";function K(){this.evEl=G,this.evWin=Q,this.pressed=!1,B.apply(this,arguments)}y(K,B,{handler:function(t){var e=Y[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:L,srcEvent:t}))}});var Z={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:I,3:"pen",4:L,5:"kinect"},tt="pointerdown",et="pointermove pointerup pointercancel";function nt(){this.evEl=tt,this.evWin=et,B.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(tt="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),y(nt,B,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),o=Z[r],i=J[t.pointerType]||t.pointerType,a=i==I,s=C(e,t.pointerId,"pointerId");1&o&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&o&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),n&&e.splice(s,1))}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ot="touchstart",it="touchstart touchmove touchend touchcancel";function at(){this.evTarget=ot,this.evWin=it,this.started=!1,B.apply(this,arguments)}function st(t,e){var n=N(t.touches),r=N(t.changedTouches);return 12&e&&(n=A(n.concat(r),"identifier",!0)),[n,r]}y(at,B,{handler:function(t){var e=rt[t.type];if(1===e&&(this.started=!0),this.started){var n=st.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:t})}}});var ut={touchstart:1,touchmove:2,touchend:4,touchcancel:8},lt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=lt,this.targetIds={},B.apply(this,arguments)}function ft(t,e){var n=N(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,a=N(t.changedTouches),s=[],u=this.target;if(i=n.filter((function(t){return x(t.target,u)})),1===e)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<a.length;)r[a[o].identifier]&&s.push(a[o]),12&e&&delete r[a[o].identifier],o++;return s.length?[A(i.concat(s),"identifier",!0),s]:void 0}function ht(){B.apply(this,arguments);var t=_(this.handler,this);this.touch=new ct(this.manager,t),this.mouse=new K(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function dt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,pt.call(this,e)):12&t&&pt.call(this,e)}function pt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function gt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(e-o.x),a=Math.abs(n-o.y);if(i<=25&&a<=25)return!0}return!1}y(ct,B,{handler:function(t){var e=ut[t.type],n=ft.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:t})}}),y(ht,B,{handler:function(t,e,n){var r=n.pointerType==I,o=n.pointerType==L;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)dt.call(this,e,n);else if(o&&gt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=k(u.style,"touchAction"),mt=vt!==i,yt="compute",_t="auto",bt="manipulation",wt="none",Et="pan-x",St="pan-y",xt=function(){if(!mt)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!e||n.CSS.supports("touch-action",r)})),t}();function Ot(t,e){this.manager=t,this.set(e)}Ot.prototype={set:function(t){t==yt&&(t=this.compute()),mt&&this.manager.element.style&&xt[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,(function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(O(t,wt))return wt;var e=O(t,Et),n=O(t,St);return e&&n?wt:e||n?e?Et:St:O(t,bt)?bt:_t}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,o=O(r,wt)&&!xt.none,i=O(r,St)&&!xt["pan-y"],a=O(r,Et)&&!xt["pan-x"];if(o){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!i)return o||i&&6&n||a&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Tt=32;function Ct(t){this.options=a({},this.defaults,t||{}),this.id=P++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Nt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function At(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function kt(t,e){var n=e.manager;return n?n.get(t):t}function Pt(){Ct.apply(this,arguments)}function Rt(){Pt.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Pt.apply(this,arguments)}function Mt(){Ct.apply(this,arguments),this._timer=null,this._input=null}function Dt(){Pt.apply(this,arguments)}function It(){Pt.apply(this,arguments)}function Lt(){Ct.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ft(t,e){return(e=e||{}).recognizers=w(e.recognizers,Ft.defaults.preset),new qt(t,e)}function qt(t,e){this.options=a({},Ft.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(M?nt:D?ct:j?ht:K))(this,H),this.touchAction=new Ot(this,this.options.touchAction),Bt(this,!0),p(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Bt(t,e){var n,r=t.element;r.style&&(p(t.options.cssProps,(function(o,i){n=k(r.style,i),e?(t.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Ct.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=kt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)||(t=kt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===C(e,t=kt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=kt(t,this);var e=C(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Nt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Nt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Tt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=a({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=Tt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},y(Pt,Ct,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,o=this.attrTest(t);return r&&(8&n||!o)?16|e:r||o?4&n?8|e:2&e?4|e:2:Tt}}),y(Rt,Pt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(St),24&t&&e.push(Et),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,o=t.direction,i=t.deltaX,a=t.deltaY;return o&e.direction||(6&e.direction?(o=0===i?1:i<0?2:4,n=i!=this.pX,r=Math.abs(t.deltaX)):(o=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=o,n&&r>e.threshold&&o&e.direction},attrTest:function(t){return Pt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=At(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),y(jt,Pt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),y(Mt,Ct,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[_t]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=h((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Tt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),y(Dt,Pt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),y(It,Pt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=At(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),y(Lt,Ct,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[bt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=t.eventType)return this.failTimeout();var i=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||X(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&i?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=h((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Tt},failTimeout:function(){return this._timer=h((function(){this.state=Tt}),this.options.interval,this),Tt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ft.VERSION="2.0.7",Ft.defaults={domEvents:!1,touchAction:yt,enable:!0,inputTarget:null,inputClass:null,preset:[[Dt,{enable:!1}],[jt,{enable:!1},["rotate"]],[It,{direction:6}],[Rt,{direction:6},["swipe"]],[Lt],[Lt,{event:"doubletap",taps:2},["tap"]],[Mt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},qt.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&14&n.state&&(o=e.curRecognizer=n),i++}},get:function(t){if(t instanceof Ct)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=C(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return p(T(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==i){var n=this.handlers;return p(T(t),(function(t){e?n[t]&&n[t].splice(C(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](e),o++}},destroy:function(){this.element&&Bt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Ft,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Tt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:qt,Input:B,TouchAction:Ot,TouchInput:ct,MouseInput:K,PointerEventInput:nt,TouchMouseInput:ht,SingleTouchInput:at,Recognizer:Ct,AttrRecognizer:Pt,Tap:Lt,Pan:Rt,Swipe:It,Pinch:jt,Rotate:Dt,Press:Mt,on:E,off:S,each:p,merge:m,extend:v,assign:a,inherit:y,bindFn:_,prefixed:k}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=Ft,"function"==typeof t&&t.amd?t((function(){return Ft})):void 0!==e&&e.exports?e.exports=Ft:n.Hammer=Ft}(window,document)}).call(this,void 0)},{}],33:[function(t,e,n){
/*!
 * index-of <https://github.com/jonschlinkert/index-of>
 *
 * Copyright (c) 2014-2015 Jon Schlinkert.
 * Licensed under the MIT license.
 */
"use strict";e.exports=function(t,e,n){if(n=n||0,null==t)return-1;var r=t.length,o=n<0?r+n:n;if(o>=t.length)return-1;for(;o<r;){if(t[o]===e)return o;o++}return-1}},{}],34:[function(t,e,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")(),c=Object.prototype.toString,f=Math.max,h=Math.min,d=function(){return l.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(t))return NaN;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var s=o.test(t);return s||i.test(t)?a(t.slice(2),s?2:8):r.test(t)?NaN:+t}e.exports=function(t,e,n){var r,o,i,a,s,u,l=0,c=!1,v=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=r,i=o;return r=o=void 0,l=e,a=t.apply(i,n)}function _(t){return l=t,s=setTimeout(w,e),c?y(t):a}function b(t){var n=t-u;return void 0===u||n>=e||n<0||v&&t-l>=i}function w(){var t=d();if(b(t))return E(t);s=setTimeout(w,function(t){var n=e-(t-u);return v?h(n,i-(t-l)):n}(t))}function E(t){return s=void 0,m&&r?y(t):(r=o=void 0,a)}function S(){var t=d(),n=b(t);if(r=arguments,o=this,u=t,n){if(void 0===s)return _(u);if(v)return s=setTimeout(w,e),y(u)}return void 0===s&&(s=setTimeout(w,e)),a}return e=g(e)||0,p(n)&&(c=!!n.leading,i=(v="maxWait"in n)?f(g(n.maxWait)||0,e):i,m="trailing"in n?!!n.trailing:m),S.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=o=s=void 0},S.flush=function(){return void 0===s?a:E(d())},S}}).call(this,window)},{}],35:[function(t,e,n){var r,o,i,a,s,u,l,c={},f=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function d(t,e){for(var n in e)t[n]=e[n];return t}function p(t){var e=t.parentNode;e&&e.removeChild(t)}function g(t,e,n){var r,o=arguments,i={};for(r in e)"key"!==r&&"ref"!==r&&(i[r]=e[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===i[r]&&(i[r]=t.defaultProps[r]);return v(t,i,e&&e.key,e&&e.ref,null)}function v(t,e,n,o,i){var a={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return null==i&&(a.__v=a),r.vnode&&r.vnode(a),a}function m(t){return t.children}function y(t,e){this.props=t,this.context=e}function _(t,e){if(null==e)return t.__?_(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?_(t):null}function b(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return b(t)}}function w(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!E.__r++||s!==r.debounceRendering)&&((s=r.debounceRendering)||a)(E)}function E(){for(var t;E.__r=i.length;)t=i.sort((function(t,e){return t.__v.__b-e.__v.__b})),i=[],t.some((function(t){var e,n,r,o,i,a,s;t.__d&&(a=(i=(e=t).__v).__e,(s=e.__P)&&(n=[],(r=d({},i)).__v=r,o=A(s,i,r,e.__n,void 0!==s.ownerSVGElement,null,n,null==a?_(i):a),k(n,i),o!=a&&b(i)))}))}function S(t,e,n,r,o,i,a,s,u,l){var h,d,g,y,b,w,E,S=r&&r.__k||f,O=S.length;for(u==c&&(u=null!=a?a[0]:O?_(r,0):null),n.__k=[],h=0;h<e.length;h++)if(null!=(y=n.__k[h]=null==(y=e[h])||"boolean"==typeof y?null:"string"==typeof y||"number"==typeof y?v(null,y,null,null,y):Array.isArray(y)?v(m,{children:y},null,null,null):null!=y.__e||null!=y.__c?v(y.type,y.props,y.key,null,y.__v):y)){if(y.__=n,y.__b=n.__b+1,null===(g=S[h])||g&&y.key==g.key&&y.type===g.type)S[h]=void 0;else for(d=0;d<O;d++){if((g=S[d])&&y.key==g.key&&y.type===g.type){S[d]=void 0;break}g=null}b=A(t,y,g=g||c,o,i,a,s,u,l),(d=y.ref)&&g.ref!=d&&(E||(E=[]),g.ref&&E.push(g.ref,null,y),E.push(d,y.__c||b,y)),null!=b?(null==w&&(w=b),u=x(t,y,g,S,a,b,u),l||"option"!=n.type?"function"==typeof n.type&&(n.__d=u):t.value=""):u&&g.__e==u&&u.parentNode!=t&&(u=_(g))}if(n.__e=w,null!=a&&"function"!=typeof n.type)for(h=a.length;h--;)null!=a[h]&&p(a[h]);for(h=O;h--;)null!=S[h]&&j(S[h],S[h]);if(E)for(h=0;h<E.length;h++)R(E[h],E[++h],E[++h])}function x(t,e,n,r,o,i,a){var s,u,l;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(o==n||i!=a||null==i.parentNode)t:if(null==a||a.parentNode!==t)t.appendChild(i),s=null;else{for(u=a,l=0;(u=u.nextSibling)&&l<r.length;l+=2)if(u==i)break t;t.insertBefore(i,a),s=a}return void 0!==s?s:i.nextSibling}function O(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===h.test(e)?n+"px":null==n?"":n}function T(t,e,n,r,o){var i,a,s,u,l;if(o?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(i=t.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(u in r)n&&u in n||O(i,u,"");if(n)for(l in n)r&&n[l]===r[l]||O(i,l,n[l])}else"o"===e[0]&&"n"===e[1]?(a=e!==(e=e.replace(/Capture$/,"")),s=e.toLowerCase(),e=(s in t?s:e).slice(2),n?(r||t.addEventListener(e,C,a),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,C,a)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&"download"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function C(t){this.l[t.type](r.event?r.event(t):t)}function N(t,e,n){var r,o;for(r=0;r<t.__k.length;r++)(o=t.__k[r])&&(o.__=t,o.__e&&("function"==typeof o.type&&o.__k.length>1&&N(o,e,n),e=x(n,o,o,t.__k,null,o.__e,e),"function"==typeof t.type&&(t.__d=e)))}function A(t,e,n,o,i,a,s,u,l){var c,f,h,p,g,v,_,b,w,E,x,O=e.type;if(void 0!==e.constructor)return null;(c=r.__b)&&c(e);try{t:if("function"==typeof O){if(b=e.props,w=(c=O.contextType)&&o[c.__c],E=c?w?w.props.value:c.__:o,n.__c?_=(f=e.__c=n.__c).__=f.__E:("prototype"in O&&O.prototype.render?e.__c=f=new O(b,E):(e.__c=f=new y(b,E),f.constructor=O,f.render=M),w&&w.sub(f),f.props=b,f.state||(f.state={}),f.context=E,f.__n=o,h=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=O.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=d({},f.__s)),d(f.__s,O.getDerivedStateFromProps(b,f.__s))),p=f.props,g=f.state,h)null==O.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==O.getDerivedStateFromProps&&b!==p&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(b,E),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(b,f.__s,E)||e.__v===n.__v){f.props=b,f.state=f.__s,e.__v!==n.__v&&(f.__d=!1),f.__v=e,e.__e=n.__e,e.__k=n.__k,f.__h.length&&s.push(f),N(e,u,t);break t}null!=f.componentWillUpdate&&f.componentWillUpdate(b,f.__s,E),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(p,g,v)}))}f.context=E,f.props=b,f.state=f.__s,(c=r.__r)&&c(e),f.__d=!1,f.__v=e,f.__P=t,c=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(o=d(d({},o),f.getChildContext())),h||null==f.getSnapshotBeforeUpdate||(v=f.getSnapshotBeforeUpdate(p,g)),x=null!=c&&c.type==m&&null==c.key?c.props.children:c,S(t,Array.isArray(x)?x:[x],e,n,o,i,a,s,u,l),f.base=e.__e,f.__h.length&&s.push(f),_&&(f.__E=f.__=null),f.__e=!1}else null==a&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=P(n.__e,e,n,o,i,a,s,l);(c=r.diffed)&&c(e)}catch(t){e.__v=null,r.__e(t,e,n)}return e.__e}function k(t,e){r.__c&&r.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){r.__e(t,e.__v)}}))}function P(t,e,n,r,o,i,a,s){var u,l,h,d,p,g=n.props,v=e.props;if(o="svg"===e.type||o,null!=i)for(u=0;u<i.length;u++)if(null!=(l=i[u])&&((null===e.type?3===l.nodeType:l.localName===e.type)||t==l)){t=l,i[u]=null;break}if(null==t){if(null===e.type)return document.createTextNode(v);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,v.is&&{is:v.is}),i=null,s=!1}if(null===e.type)g!==v&&t.data!==v&&(t.data=v);else{if(null!=i&&(i=f.slice.call(t.childNodes)),h=(g=n.props||c).dangerouslySetInnerHTML,d=v.dangerouslySetInnerHTML,!s){if(null!=i)for(g={},p=0;p<t.attributes.length;p++)g[t.attributes[p].name]=t.attributes[p].value;(d||h)&&(d&&h&&d.__html==h.__html||(t.innerHTML=d&&d.__html||""))}(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||T(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||T(t,i,e[i],n[i],r)})(t,v,g,o,s),d?e.__k=[]:(u=e.props.children,S(t,Array.isArray(u)?u:[u],e,n,r,"foreignObject"!==e.type&&o,i,a,c,s)),s||("value"in v&&void 0!==(u=v.value)&&u!==t.value&&T(t,"value",u,g.value,!1),"checked"in v&&void 0!==(u=v.checked)&&u!==t.checked&&T(t,"checked",u,g.checked,!1))}return t}function R(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function j(t,e,n){var o,i,a;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||R(o,null,e)),n||"function"==typeof t.type||(n=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){r.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(a=0;a<o.length;a++)o[a]&&j(o[a],e,n);null!=i&&p(i)}function M(t,e,n){return this.constructor(t,n)}function D(t,e,n){var o,i,a;r.__&&r.__(t,e),i=(o=n===u)?null:n&&n.__k||e.__k,t=g(m,null,[t]),a=[],A(e,(o?e:n||e).__k=t,i||c,c,void 0!==e.ownerSVGElement,n&&!o?[n]:i?null:e.childNodes.length?f.slice.call(e.childNodes):null,a,n||c,o),k(a,t)}r={__e:function(t,e){for(var n,r;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(t)),r)return w(n.__E=n)}catch(e){t=e}throw t}},o=function(t){return null!=t&&void 0===t.constructor},y.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&d(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),w(this))},y.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),w(this))},y.prototype.render=m,i=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,E.__r=0,u=c,l=0,n.render=D,n.hydrate=function(t,e){D(t,e,u)},n.createElement=g,n.h=g,n.Fragment=m,n.createRef=function(){return{current:null}},n.isValidElement=o,n.Component=y,n.cloneElement=function(t,e){var n,r;for(r in e=d(d({},t.props),e),arguments.length>2&&(e.children=f.slice.call(arguments,2)),n={},e)"key"!==r&&"ref"!==r&&(n[r]=e[r]);return v(t.type,n,e.key||t.key,e.ref||t.ref,null)},n.createContext=function(t){var e={},n={__c:"__cC"+l++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var r,o=this;return this.getChildContext||(r=[],this.getChildContext=function(){return e[n.__c]=o,e},this.shouldComponentUpdate=function(t){o.props.value!==t.value&&r.some((function(e){e.context=t.value,w(e)}))},this.sub=function(t){r.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){r.splice(r.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Consumer.contextType=n,n.Provider.__=n,n},n.toChildArray=function t(e){return null==e||"boolean"==typeof e?[]:Array.isArray(e)?f.concat.apply([],e.map(t)):[e]},n.__u=j,n.options=r},{}],36:[function(t,e,n){var r,o,i,a=t("preact"),s=0,u=[],l=a.options.__r,c=a.options.diffed,f=a.options.__c,h=a.options.unmount;function d(t,e){a.options.__h&&a.options.__h(o,t,s||e),s=0;var n=o.__H||(o.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function p(t){return s=1,g(S,t)}function g(t,e,n){var i=d(r++,2);return i.t=t,i.__c||(i.__c=o,i.__=[n?n(e):S(void 0,e),function(t){var e=i.t(i.__[0],t);i.__[0]!==e&&(i.__=[e,i.__[1]],i.__c.setState({}))}]),i.__}function v(t,e){var n=d(r++,4);!a.options.__s&&E(n.__H,e)&&(n.__=t,n.__H=e,o.__h.push(n))}function m(t,e){var n=d(r++,7);return E(n.__H,e)?(n.__H=e,n.__h=t,n.__=t()):n.__}function y(){u.some((function(t){if(t.__P)try{t.__H.__h.forEach(b),t.__H.__h.forEach(w),t.__H.__h=[]}catch(e){return t.__H.__h=[],a.options.__e(e,t.__v),!0}})),u=[]}a.options.__r=function(t){l&&l(t),r=0;var e=(o=t.__c).__H;e&&(e.__h.forEach(b),e.__h.forEach(w),e.__h=[])},a.options.diffed=function(t){c&&c(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==u.push(e)&&i===a.options.requestAnimationFrame||((i=a.options.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),_&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);_&&(e=requestAnimationFrame(n))})(y))},a.options.__c=function(t,e){e.some((function(t){try{t.__h.forEach(b),t.__h=t.__h.filter((function(t){return!t.__||w(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],a.options.__e(n,t.__v)}})),f&&f(t,e)},a.options.unmount=function(t){h&&h(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(b)}catch(t){a.options.__e(t,e.__v)}};var _="function"==typeof requestAnimationFrame;function b(t){"function"==typeof t.u&&t.u()}function w(t){t.u=t.__()}function E(t,e){return!t||e.some((function(e,n){return e!==t[n]}))}function S(t,e){return"function"==typeof e?e(t):e}n.useState=p,n.useReducer=g,n.useEffect=function(t,e){var n=d(r++,3);!a.options.__s&&E(n.__H,e)&&(n.__=t,n.__H=e,o.__H.__h.push(n))},n.useLayoutEffect=v,n.useRef=function(t){return s=5,m((function(){return{current:void 0===t?null:t}}),[])},n.useImperativeHandle=function(t,e,n){s=6,v((function(){"function"==typeof t?t(e()):t&&(t.current=e())}),null==n?n:n.concat(t))},n.useMemo=m,n.useCallback=function(t,e){return s=8,m((function(){return t}),e)},n.useContext=function(t){var e=o.context[t.__c],n=d(r++,9);return n.__c=t,e?(null==n.__&&(n.__=!0,e.sub(o)),e.props.value):t.__},n.useDebugValue=function(t,e){a.options.useDebugValue&&a.options.useDebugValue(e?e(t):t)},n.useErrorBoundary=function(t){var e=d(r++,10),n=p();return e.__=t,o.componentDidCatch||(o.componentDidCatch=function(t){e.__&&e.__(t),n[1](t)}),[n[0],function(){n[1](void 0)}]}},{preact:35}],37:[function(t,e,n){"use strict";var r=t("./lib/ReactPropTypesSecret");function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function t(t,e,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},{"./lib/ReactPropTypesSecret":39}],38:[function(t,e,n){e.exports=t("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":37}],39:[function(t,e,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],40:[function(t,e,n){var r="complete",o="canceled";function i(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function a(t){var e=t._scrollSettings;if(e){var n=e.maxSynchronousAlignments,o=function(t,e){var n,r,o,i,a,s,u,l=t.align,c=t.target.getBoundingClientRect(),f=l&&null!=l.left?l.left:.5,h=l&&null!=l.top?l.top:.5,d=l&&null!=l.leftOffset?l.leftOffset:0,p=l&&null!=l.topOffset?l.topOffset:0,g=f,v=h;if(t.isWindow(e))s=Math.min(c.width,e.innerWidth),u=Math.min(c.height,e.innerHeight),r=c.left+e.pageXOffset-e.innerWidth*g+s*g,o=c.top+e.pageYOffset-e.innerHeight*v+u*v,o-=p,i=(r-=d)-e.pageXOffset,a=o-e.pageYOffset;else{s=c.width,u=c.height,n=e.getBoundingClientRect();var m=c.left-(n.left-e.scrollLeft),y=c.top-(n.top-e.scrollTop);r=m+s*g-e.clientWidth*g,o=y+u*v-e.clientHeight*v,r-=d,o-=p,r=Math.max(Math.min(r,e.scrollWidth-e.clientWidth),0),o=Math.max(Math.min(o,e.scrollHeight-e.clientHeight),0),i=r-e.scrollLeft,a=o-e.scrollTop}return{x:r,y:o,differenceX:i,differenceY:a}}(e,t),s=Date.now()-e.startTime,u=Math.min(1/e.time*s,1);if(e.endIterations>=n)return i(t,o.x,o.y),t._scrollSettings=null,e.end(r);var l=1-e.ease(u);if(i(t,o.x-o.differenceX*l,o.y-o.differenceY*l),s>=e.time)return e.endIterations++,a(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(a.bind(null,t))}}function s(t){return t.self===t}function u(t,e,n,r){var i,u=!e._scrollSettings,l=e._scrollSettings,c=Date.now(),f={passive:!0};function h(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),n.debug&&console.log("Scrolling ended with type",t,"for",e),r(t),i&&(e.removeEventListener("touchstart",i,f),e.removeEventListener("wheel",i,f))}l&&l.end(o);var d=n.maxSynchronousAlignments;return null==d&&(d=3),e._scrollSettings={startTime:c,endIterations:0,target:t,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||s,maxSynchronousAlignments:d,end:h},"cancellable"in n&&!n.cancellable||(i=h.bind(null,o),e.addEventListener("touchstart",i,f),e.addEventListener("wheel",i,f)),u&&a(e),i}function l(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function c(){return!0}function f(t){if(t.assignedSlot)return f(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}e.exports=function(t,e,n){if(t){"function"==typeof e&&(n=e,e=null),e||(e={}),e.time=isNaN(e.time)?1e3:e.time,e.ease=e.ease||function(t){return 1-Math.pow(1-t,t/2)};var o,i=f(t),a=1,s=e.validTarget||c,h=e.isScrollable;for(e.debug&&(console.log("About to scroll to",t),i||console.error("Target did not have a parent, is it mounted in the DOM?"));i;)if(e.debug&&console.log("Scrolling parent node",i),s(i,a)&&(h?h(i,l):l(i))&&(a++,o=u(t,i,e,d)),!(i=f(i))){d(r);break}return o}function d(t){--a||n&&n(t)}}},{}],41:[function(t,e,n){e.exports=t("./zen-observable.js").Observable},{"./zen-observable.js":42}],42:[function(t,e,n){"use strict";var r;r=function(t,e){function n(t){return"function"==typeof Symbol&&Boolean(Symbol[t])}function r(t){return n(t)?Symbol[t]:"@@"+t}function o(t,e){var n=t[e];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function i(t){var e=r("species");return e?t[e]:t}function a(t,e){Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t,n,r)}))}function s(t){var e=t._cleanup;e&&(t._cleanup=void 0,e())}function u(t){return void 0===t._observer}function l(t){u(t)||(t._observer=void 0,s(t))}function c(t,e){if(Object(t)!==t)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=t;var n=o(t,"start");if(n&&n.call(t,this),!u(this)){t=new f(this);try{var r=e.call(void 0,t);if(null!=r){if("function"==typeof r.unsubscribe)i=r,r=function(t){i.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(e){return void t.error(e)}var i;u(this)&&s(this)}}function f(t){this._subscription=t}function h(t){if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}a(c.prototype={},{get closed(){return u(this)},unsubscribe:function(){l(this)}}),a(f.prototype={},{get closed(){return u(this._subscription)},next:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;try{var r=o(n,"next");if(!r)return;return r.call(n,t)}catch(t){try{l(e)}finally{throw t}}}},error:function(t){var e=this._subscription;if(u(e))throw t;var n=e._observer;e._observer=void 0;try{var r=o(n,"error");if(!r)throw t;t=r.call(n,t)}catch(t){try{s(e)}finally{throw t}}return s(e),t},complete:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;e._observer=void 0;try{var r=o(n,"complete");t=r?r.call(n,t):void 0}catch(t){try{s(e)}finally{throw t}}return s(e),t}}}),a(h.prototype,{subscribe:function(t){for(var e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);return"function"==typeof t&&(t={next:t,error:e[0],complete:e[1]}),new c(t,this._subscriber)},forEach:function(t){var e=this;return new Promise((function(n,r){if("function"!=typeof t)return Promise.reject(new TypeError(t+" is not a function"));e.subscribe({_subscription:null,start:function(t){if(Object(t)!==t)throw new TypeError(t+" is not an object");this._subscription=t},next:function(e){var n=this._subscription;if(!n.closed)try{return t(e)}catch(t){r(t),n.unsubscribe()}},error:r,complete:n})}))},map:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{e=t(e)}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(t){return n.complete(t)}})}))},filter:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{if(!t(e))return}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(){return n.complete()}})}))},reduce:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=i(this.constructor),r=arguments.length>1,o=!1,a=arguments[1],s=a;return new n((function(n){return e.subscribe({next:function(e){if(!n.closed){var i=!o;if(o=!0,!i||r)try{s=t(s,e)}catch(t){return n.error(t)}else s=e}},error:function(t){return n.error(t)},complete:function(){o||r?(n.next(s),n.complete()):n.error(new TypeError("Cannot reduce an empty sequence"))}})}))},flatMap:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){var r=!1,o=[],i=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(t){return void n.error(t)}h.from(e).subscribe({_subscription:null,start:function(t){o.push(this._subscription=t)},next:function(t){n.next(t)},error:function(t){n.error(t)},complete:function(){var t=o.indexOf(this._subscription);t>=0&&o.splice(t,1),a()}})},error:function(t){return n.error(t)},complete:function(){r=!0,a()}});function a(){r&&0===o.length&&n.complete()}return function(t){o.forEach((function(t){return t.unsubscribe()})),i.unsubscribe()}}))}}),Object.defineProperty(h.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),a(h,{from:function(t){var e="function"==typeof this?this:h;if(null==t)throw new TypeError(t+" is not an object");var i=o(t,r("observable"));if(i){var a=i.call(t);if(Object(a)!==a)throw new TypeError(a+" is not an object");return a.constructor===e?a:new e((function(t){return a.subscribe(t)}))}if(n("iterator")&&(i=o(t,r("iterator"))))return new e((function(e){for(var n,r=i.call(t)[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;if(e.next(o),e.closed)return}e.complete()}));if(Array.isArray(t))return new e((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}));throw new TypeError(t+" is not observable")},of:function(){for(var t=[],e=0;e<arguments.length;++e)t.push(arguments[e]);var n="function"==typeof this?this:h;return new n((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}))}}),Object.defineProperty(h,r("species"),{get:function(){return this},configurable:!0}),t.Observable=h},void 0!==n?r(n):"undefined"!=typeof self&&r(self)},{}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Adder=n.ARROW_POINTING_UP=n.ARROW_POINTING_DOWN=void 0;var r,o=t("preact"),i=(r=t("./components/adder-toolbar"))&&r.__esModule?r:{default:r},a=t("./util/shadow-root");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.ARROW_POINTING_DOWN=1;function u(t){return t.toString()+"px"}n.ARROW_POINTING_UP=2;var l=function(){function t(e,n){var r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._container=e,this._shadowRoot=(0,a.createShadowRoot)(e),Object.assign(e.style,{display:"block",position:"absolute",top:0,zIndex:999}),this._view=e.ownerDocument.defaultView,this._width=function(){return r._shadowRoot.firstChild.getBoundingClientRect().width},this._height=function(){return r._shadowRoot.firstChild.getBoundingClientRect().height},this._isVisible=!1,this._arrowDirection="up",this._onAnnotate=n.onAnnotate,this._onHighlight=n.onHighlight,this._onShowAnnotations=n.onShowAnnotations,this.annotationsForSelection=[],this._render()}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"hide",value:function(){this._isVisible=!1,this._render()}},{key:"target",value:function(t,e){var n,r,o;n=e?1:2;var i=Math.min(20,t.width);return o=e?t.left-this._width()/2+i:t.left+t.width-this._width()/2-i,t.top-this._height()<0&&1===n?n=2:t.top+this._height()>this._view.innerHeight&&(n=1),r=2===n?t.top+t.height+10:t.top-this._height()-10,o=Math.max(o,0),o=Math.min(o,this._view.innerWidth-this._width()),r=Math.max(r,0),{top:r=Math.min(r,this._view.innerHeight-this._height()),left:o,arrowDirection:n}}},{key:"showAt",value:function(t,e,n){var r=function(t){for(var e=t.parentElement;e.parentElement&&"static"===getComputedStyle(e).position;)e=e.parentElement;return e}(this._container).getBoundingClientRect();Object.assign(this._container.style,{top:u(e-r.top),left:u(t-r.left)}),this._isVisible=!0,this._arrowDirection=2===n?"up":"down",this._render()}},{key:"_render",value:function(){var t=this;(0,o.render)((0,o.createElement)(i.default,{isVisible:this._isVisible,arrowDirection:this._arrowDirection,onCommand:function(e){switch(e){case"annotate":t._onAnnotate(),t.hide();break;case"highlight":t._onHighlight(),t.hide();break;case"show":t._onShowAnnotations(t.annotationsForSelection)}},annotationCount:this.annotationsForSelection.length}),this._shadowRoot)}}]),t}();n.Adder=l},{"./components/adder-toolbar":53,"./util/shadow-root":82,preact:35}],44:[function(t,e,n){var r,o,i,a,s;s=t("./types"),r=s.RangeAnchor,o=s.TextPositionAnchor,i=s.TextQuoteAnchor,a=function(t,e,n,r){return new Promise((function(o,i){try{return o(t.fromSelector(e,n,r).toRange(r))}catch(t){return i(t)}}))},n.anchor=function(t,e,n){var s,u,l,c,f,h,d,p,g;for(null==n&&(n={}),c=null,h=null,d=null,s=0,u=(p=null!=e?e:[]).length;s<u;s++)switch((g=p[s]).type){case"TextPositionSelector":c=g,n.hint=c.start;break;case"TextQuoteSelector":h=g;break;case"RangeSelector":d=g}return l=function(t){if(null!=(null!=h?h.exact:void 0)&&t.toString()!==h.exact)throw new Error("quote mismatch");return t},f=Promise.reject("unable to anchor"),null!=d&&(f=f.catch((function(){return a(r,t,d,n).then(l)}))),null!=c&&(f=f.catch((function(){return a(o,t,c,n).then(l)}))),null!=h&&(f=f.catch((function(){return a(i,t,h,n)}))),f},n.describe=function(t,e,n){var a,s,u;return null==n&&(n={}),u=[r,o,i],function(){var r,o,i;for(i=[],r=0,o=u.length;r<o;r++){s=u[r];try{a=s.fromRange(t,e,n),i.push(a.toSelector(n))}catch(t){continue}}return i}()}},{"./types":48}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.anchor=function(t,e){var n=e.find((function(t){return"TextPositionSelector"===t.type})),r=e.find((function(t){return"TextQuoteSelector"===t.type})),o=Promise.reject("unable to anchor");return n&&(o=o.catch((function(){return O(n.start).then((function(e){var o=e.index,i=e.offset,a=e.textContent,u=n.start-i,l=n.end-i,c=l-u;!function(t){if(r&&r.exact!==t.toString())throw new Error("quote mismatch")}(a.substr(u,c));var f=new s.TextPositionAnchor(t,u,l);return g(o,f)}))}))),r&&(o=o.catch((function(){if(n&&b[r.exact]&&b[r.exact][n.start]){var t=b[r.exact][n.start],e=t.pageIndex,o=t.anchor;return g(e,o)}return function(t){var e=S().pagesCount,n=Array(e).fill(0).map((function(t,e){return e}));return t?O(t.start).then((function(t){return function(t){for(var e=n.slice(0,t),r=n.slice(t),o=[];e.length>0||r.length>0;)r.length&&o.push(r.shift()),e.length&&o.push(e.pop());return o}(t.index)})):Promise.resolve(n)}(n).then((function(t){return function t(e,n,r){if(0===e.length)return Promise.reject(new Error("Quote not found"));var o=function(t){return p(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||f()}(e),i=o[0],a=o.slice(1),u=v(i),l=x(i);return Promise.all([u,l]).then((function(t){var e=function(t,e){return p(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||h(t,e)||f()}(t,2),o=e[0],i=e[1],a={textContent:o},u=s.TextQuoteAnchor.fromSelector(a,n);if(r){var l=r.start-i;return l=Math.max(0,l),l=Math.min(l,o.length),u.toPositionAnchor({hint:l})}return u.toPositionAnchor()})).then((function(t){return r&&(b[n.exact]||(b[n.exact]={}),b[n.exact][r.start]={pageIndex:i,anchor:t}),g(i,t)})).catch((function(){return t(a,n,r)}))}(t,r,n)}))}))),o},n.describe=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new i.default.BrowserRange(e).normalize(),a=E(o.start),u=E(o.end);if(a!==u)return Promise.reject(new Error("selecting across page breaks is not supported"));var l=o.limit(a),c=o.limit(u),f=w(a.parentNode),h=y.call(document,a,NodeFilter.SHOW_TEXT),d=(0,r.default)(h,o.start),p=(0,r.default)(h,o.end)+d+o.end.textContent.length;return x(f).then((function(e){d+=e,p+=e;var r=new s.TextPositionAnchor(t,d,p).toSelector(n),o=document.createRange();o.setStartBefore(l.start),o.setEndAfter(c.end);var i=s.TextQuoteAnchor.fromRange(t,o,n).toSelector(n);return Promise.all([r,i])}))},n.purgeCache=function(){_={},b={}};var r=u(t("dom-seek")),o=u(t("../pdfjs-rendering-states")),i=u(t("./range")),a=t("./text-position"),s=t("./types");function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function c(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t){if(Array.isArray(t))return t}var g=function(t,e){return l(m(t),(function(t){if(t.renderingState===o.default.FINISHED&&t.textLayer&&t.textLayer.renderingDone){var n=t.textLayer.textLayerDiv;return(0,a.toRange)(n,e.start,e.end)}var r=t.div||t.el,i=r.getElementsByClassName("annotator-placeholder")[0];i||((i=document.createElement("span")).classList.add("annotator-placeholder"),i.textContent="Loading annotations…",r.appendChild(i));var s=document.createRange();return s.setStartBefore(i),s.setEndAfter(i),s}))},v=c((function(t){return _[t]||(_[t]=function(t){return l(m(t),(function(t){return l(t.pdfPage.getTextContent({normalizeWhitespace:!0}),(function(t){return t.items.filter((function(t){return/\S/.test(t.str)})).map((function(t){return t.str})).join("")}))}))}(t)),_[t]})),m=c((function(t){var e=S(),n=e.getPageView(t);return function(t,e){var n=t();return n&&n.then?n.then(e):e(n)}((function(){if(!n||!n.pdfPage)return l(new Promise((function(n){document.addEventListener("pagesloaded",(function r(){document.removeEventListener("pagesloaded",r),n(e.getPageView(t))}))})),(function(t){n=t}))}),(function(){return n}))})),y=t("dom-node-iterator/polyfill")(),_={},b={};function w(t){return Array.from(t.parentNode.childNodes).indexOf(t)}function E(t){for(;!t.classList||!t.classList.contains("page");)t=t.parentNode;return t.getElementsByClassName("textLayer")[0]}function S(){return PDFViewerApplication.pdfViewer}function x(t){var e=-1;return function n(r){return++e===t?Promise.resolve(r):v(e).then((function(t){return n(r+t.length)}))}(0)}function O(t){var e=0,n=0;return v(0).then((function r(o){var i=S().pagesCount-1;return n+o.length>t||e===i?(t=n,Promise.resolve({index:e,offset:t,textContent:o})):(++e,n+=o.length,v(e).then(r))}))}},{"../pdfjs-rendering-states":68,"./range":46,"./text-position":47,"./types":48,"dom-node-iterator/polyfill":28,"dom-seek":29}],46:[function(t,e,n){var r,o,i,a={}.hasOwnProperty;r=t("jquery"),i=t("./util"),(o={}).sniff=function(t){return null!=t.commonAncestorContainer?new o.BrowserRange(t):"string"==typeof t.start?new o.SerializedRange(t):t.start&&"object"==typeof t.start?new o.NormalizedRange(t):(console.error("Could not sniff range type"),!1)},o.nodeFromXPath=function(t,e){var n,o,a,s,u;return null==e&&(e=document),o=function(t,n){null==n&&(n=null);try{return document.evaluate("."+t,e,n,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(n){return console.log("XPath evaluation failed."),console.log("Trying fallback..."),i.nodeFromXPath(t,e)}},r.isXMLDoc(document.documentElement)?(n=document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement),(s=o(t,n))||(t=function(){var e,n,r,o;for(o=[],e=0,n=(r=t.split("/")).length;e<n;e++)(u=r[e])&&-1===u.indexOf(":")?o.push(u.replace(/^([a-z]+)/,"xhtml:$1")):o.push(u);return o}().join("/"),a=document.lookupNamespaceURI(null),s=o(t,n=function(t){return"xhtml"===t?a:document.documentElement.getAttribute("xmlns:"+t)})),s):o(t)},o.RangeError=function(t){function e(t,n,r){this.type=t,this.message=n,this.parent=null!=r?r:null,e.__super__.constructor.call(this,this.message)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Error),e}(),o.BrowserRange=function(){function t(t){this.commonAncestorContainer=t.commonAncestorContainer,this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,r,a;if(this.tainted)return console.error("You may only call normalize() once on a BrowserRange!"),!1;if(this.tainted=!0,a={},this.startContainer.nodeType===Node.ELEMENT_NODE?(this.startOffset<this.startContainer.childNodes.length?a.start=i.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]):a.start=i.getFirstTextNodeNotBefore(this.startContainer),a.startOffset=0):(a.start=this.startContainer,a.startOffset=this.startOffset),this.endContainer.nodeType===Node.ELEMENT_NODE){if(null!=(n=this.endContainer.childNodes[this.endOffset])){for(e=n;null!=e&&e.nodeType!==Node.TEXT_NODE;)e=e.firstChild;null!=e&&(a.end=e,a.endOffset=0)}null==a.end&&(n=this.endOffset?this.endContainer.childNodes[this.endOffset-1]:this.endContainer.previousSibling,a.end=i.getLastTextNodeUpTo(n),a.endOffset=a.end.nodeValue.length)}else a.end=this.endContainer,a.endOffset=this.endOffset;for(r={},a.startOffset>0?!a.start.nextSibling||a.start.nodeValue.length>a.startOffset?r.start=a.start.splitText(a.startOffset):r.start=a.start.nextSibling:r.start=a.start,a.start===a.end?(r.start.nodeValue.length>a.endOffset-a.startOffset&&r.start.splitText(a.endOffset-a.startOffset),r.end=r.start):(a.end.nodeValue.length>a.endOffset&&a.end.splitText(a.endOffset),r.end=a.end),r.commonAncestor=this.commonAncestorContainer;r.commonAncestor.nodeType!==Node.ELEMENT_NODE;)r.commonAncestor=r.commonAncestor.parentNode;return new o.NormalizedRange(r)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t}(),o.NormalizedRange=function(){function t(t){this.commonAncestor=t.commonAncestor,this.start=t.start,this.end=t.end}return t.prototype.normalize=function(t){return this},t.prototype.limit=function(t){var e,n,o,i,a,s;if(!(o=r.grep(this.textNodes(),(function(e){return e.parentNode===t||r.contains(t,e.parentNode)}))).length)return null;for(this.start=o[0],this.end=o[o.length-1],s=r(this.start).parents(),e=0,n=(a=r(this.end).parents()).length;e<n;e++)if(i=a[e],-1!==s.index(i)){this.commonAncestor=i;break}return this},t.prototype.serialize=function(t,e){var n,a,s;return s=(a=function(n,o){var a,s,u,l,c,f,h;for(c=e?r(n).parents(":not("+e+")").eq(0):r(n).parent(),h=i.xpathFromNode(c,t)[0],l=0,a=0,s=(u=(f=i.getTextNodes(c)).slice(0,f.index(n))).length;a<s;a++)l+=u[a].nodeValue.length;return o?[h,l+n.nodeValue.length]:[h,l]})(this.start),n=a(this.end,!0),new o.SerializedRange({start:s[0],end:n[0],startOffset:s[1],endOffset:n[1]})},t.prototype.text=function(){var t;return function(){var e,n,r,o;for(o=[],e=0,n=(r=this.textNodes()).length;e<n;e++)t=r[e],o.push(t.nodeValue);return o}.call(this).join("")},t.prototype.textNodes=function(){var t,e,n,o;return n=(e=[(o=i.getTextNodes(r(this.commonAncestor))).index(this.start),o.index(this.end)])[0],t=e[1],r.makeArray(o.slice(n,+t+1||9e9))},t.prototype.toRange=function(){var t;return(t=document.createRange()).setStartBefore(this.start),t.setEndAfter(this.end),t},t}(),o.SerializedRange=function(){function t(t){this.start=t.start,this.startOffset=t.startOffset,this.end=t.end,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,a,s,u,l,c,f,h,d,p,g,v,m;for(d={},a=0,u=(p=["start","end"]).length;a<u;a++){h=p[a];try{f=o.nodeFromXPath(this[h],t)}catch(t){throw n=t,new o.RangeError(h,"Error while finding "+h+" node: "+this[h]+": "+n,n)}if(!f)throw new o.RangeError(h,"Couldn't find "+h+" node: "+this[h]);for(c=0,v=this[h+"Offset"],"end"===h&&v--,s=0,l=(g=i.getTextNodes(r(f))).length;s<l;s++){if(c+(m=g[s]).nodeValue.length>v){d[h+"Container"]=m,d[h+"Offset"]=this[h+"Offset"]-c;break}c+=m.nodeValue.length}if(null==d[h+"Offset"])throw new o.RangeError(h+"offset","Couldn't find offset "+this[h+"Offset"]+" in element "+this[h])}return e=null==document.compareDocumentPosition?function(t,e){return t.contains(e)}:function(t,e){return 16&t.compareDocumentPosition(e)},r(d.startContainer).parents().each((function(){if(e(this,d.endContainer))return d.commonAncestorContainer=this,!1})),new o.BrowserRange(d).normalize(t)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}},t}(),e.exports=o},{"./util":49,jquery:"jquery"}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toRange=function(t,e,n){for(var r,o,i,a=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1),s=0,u=0,l=0;(i=a.nextNode())&&(!r||!o);){var c=i.nodeValue;!r&&e>=l&&e<=l+c.length&&(r=i,s=e-l),!o&&n>=l&&n<=l+c.length&&(o=i,u=n-l),l+=c.length}if(!r)throw new Error("invalid start offset");if(!o)throw new Error("invalid end offset");var f=t.ownerDocument.createRange();return f.setStart(r,s),f.setEnd(o,u),f}},{}],48:[function(t,e,n){var r,o,i,a,s,u,l;a=t("dom-anchor-text-position"),s=t("dom-anchor-text-quote"),l=t("./range"),u=function(t){throw new Error('missing required parameter "'+t+'"')},r=function(){function t(t,e){null==t&&u("root"),null==e&&u("range"),this.root=t,this.range=l.sniff(e).normalize(this.root)}return t.fromRange=function(e,n){return new t(e,n)},t.fromSelector=function(e,n){var r;return r={start:n.startContainer,startOffset:n.startOffset,end:n.endContainer,endOffset:n.endOffset},new t(e,new l.SerializedRange(r))},t.prototype.toRange=function(){return this.range.toRange()},t.prototype.toSelector=function(t){var e;return null==t&&(t={}),{type:"RangeSelector",startContainer:(e=this.range.serialize(this.root,t.ignoreSelector)).start,startOffset:e.startOffset,endContainer:e.end,endOffset:e.endOffset}},t}(),o=function(){function t(t,e,n){this.root=t,this.start=e,this.end=n}return t.fromRange=function(e,n){var r;return r=a.fromRange(e,n),t.fromSelector(e,r)},t.fromSelector=function(e,n){return new t(e,n.start,n.end)},t.prototype.toSelector=function(){return{type:"TextPositionSelector",start:this.start,end:this.end}},t.prototype.toRange=function(){return a.toRange(this.root,{start:this.start,end:this.end})},t}(),i=function(){function t(t,e,n){null==n&&(n={}),this.root=t,this.exact=e,this.context=n}return t.fromRange=function(e,n,r){var o;return o=s.fromRange(e,n,r),t.fromSelector(e,o)},t.fromSelector=function(e,n){var r,o;return r=n.prefix,o=n.suffix,new t(e,n.exact,{prefix:r,suffix:o})},t.prototype.toSelector=function(){return{type:"TextQuoteSelector",exact:this.exact,prefix:this.context.prefix,suffix:this.context.suffix}},t.prototype.toRange=function(t){var e;if(null==t&&(t={}),null===(e=s.toRange(this.root,this.toSelector(),t)))throw new Error("Quote not found");return e},t.prototype.toPositionAnchor=function(t){var e;if(null==t&&(t={}),null===(e=s.toTextPosition(this.root,this.toSelector(),t)))throw new Error("Quote not found");return new o(this.root,e.start,e.end)},t}(),n.RangeAnchor=r,n.TextPositionAnchor=o,n.TextQuoteAnchor=i},{"./range":46,"dom-anchor-text-position":6,"dom-anchor-text-quote":9}],49:[function(t,e,n){var r,o,i,a,s;r=t("jquery"),i=t("./xpath"),a=i.simpleXPathJQuery,s=i.simpleXPathPure,(o={}).flatten=function(t){var e;return(e=function(t){var n,o,i,a;for(o=[],i=0,a=t.length;i<a;i++)n=t[i],o=o.concat(n&&r.isArray(n)?e(n):n);return o})(t)},o.getTextNodes=function(t){var e;return e=function(t){var n;if(t&&t.nodeType!==Node.TEXT_NODE){if(n=[],t.nodeType!==Node.COMMENT_NODE)for(t=t.lastChild;t;)n.push(e(t)),t=t.previousSibling;return n.reverse()}return t},t.map((function(){return o.flatten(e(this))}))},o.getLastTextNodeUpTo=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.lastChild&&null!=(e=o.getLastTextNodeUpTo(t.lastChild)))return e}return null!=(t=t.previousSibling)?o.getLastTextNodeUpTo(t):null},o.getFirstTextNodeNotBefore=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.firstChild&&null!=(e=o.getFirstTextNodeNotBefore(t.firstChild)))return e}return null!=(t=t.nextSibling)?o.getFirstTextNodeNotBefore(t):null},o.xpathFromNode=function(t,e){var n;try{n=a.call(t,e)}catch(r){console.log("jQuery-based XPath construction failed! Falling back to manual."),n=s.call(t,e)}return n},o.nodeFromXPath=function(t,e){var n,r,o,i,a,s,u;for(a=e,n=0,o=(u=t.substring(1).split("/")).length;n<o;n++)i=(s=u[n].split("["))[0],r=null!=(r=s[1])?parseInt((null!=r?r.split("]"):void 0)[0]):1,a=findChild(a,i.toLowerCase(),r);return a},e.exports={nodeFromXPath:o.nodeFromXPath,xpathFromNode:o.xpathFromNode,getTextNodes:o.getTextNodes,getFirstTextNodeNotBefore:o.getFirstTextNodeNotBefore,getLastTextNodeUpTo:o.getLastTextNodeUpTo}},{"./xpath":50,jquery:"jquery"}],50:[function(t,e,n){var r,o,i,a,s;r=t("jquery"),a=function(t){return this.map((function(){var e,n,o,i;for(o="",e=this;(null!=e?e.nodeType:void 0)===Node.ELEMENT_NODE&&e!==t;)i=e.tagName.replace(":","\\:"),n="["+(n=r(e.parentNode).children(i).index(e)+1)+"]",o="/"+e.tagName.toLowerCase()+n+o,e=e.parentNode;return o})).get()},s=function(t){var e,n,r;return e=function(t){return o(t)+"["+i(t)+"]"},r=t,n=function(t){var n;for(n="";t!==r;){if(null==t)throw new Error("Called getPathTo on a node which was not a descendant of @rootNode. "+r);n=e(t)+"/"+n,t=t.parentNode}return(n="/"+n).replace(/\/$/,"")},this.map((function(){return n(this)})).get()},o=function(t){var e;switch(e=t.nodeName.toLowerCase()){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return e}},i=function(t){var e,n;for(e=0,n=t;n;)n.nodeName===t.nodeName&&e++,n=n.previousSibling;return e},e.exports={simpleXPathJQuery:a,simpleXPathPure:s}},{jquery:"jquery"}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){e.on(o.default.PUBLIC_ANNOTATION_COUNT_CHANGED,(function(e){var n=t.querySelectorAll("[data-hypothesis-annotation-count]");Array.from(n).forEach((function(t){t.textContent=e}))}))};var r,o=(r=t("../shared/bridge-events"))&&r.__esModule?r:{default:r}},{"../shared/bridge-events":92}],52:[function(t,e,n){"use strict";function r(t,e){var n=this;if(this.bridge=t,!e.on)throw new Error("options.on unspecified for AnnotationSync.");if(!e.emit)throw new Error("options.emit unspecified for AnnotationSync.");this.cache={},this._on=e.on,this._emit=e.emit,Object.keys(this._eventListeners).forEach((function(t){var e=n._eventListeners[t];n._on(t,(function(t){e.apply(n,[t])}))})),Object.keys(this._channelListeners).forEach((function(t){n.bridge.on(t,(function(e,r){n._channelListeners[t].apply(n,[e,r])}))}))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.cache=null,r.prototype.sync=function(t){var e;return t=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._format(t[e]));return n}.call(this),this.bridge.call("sync",t,(e=this,function(t,n){var r,o=[];for(n=n||[],r=0;r<n.length;r++)o.push(e._parse(n[r]));return o})),this},r.prototype._channelListeners={deleteAnnotation:function(t,e){var n=this._parse(t);delete this.cache[n.$tag],this._emit("annotationDeleted",n),e(null,this._format(n))},loadAnnotations:function(t,e){var n=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._parse(t[e]));return n}.call(this);return this._emit("annotationsLoaded",n),e(null,n)}},r.prototype._eventListeners={beforeAnnotationCreated:function(t){if(!t.$tag)return this._mkCallRemotelyAndParseResults("beforeCreateAnnotation")(t)}},r.prototype._mkCallRemotelyAndParseResults=function(t,e){return n=this,function(r){n.bridge.call(t,n._format(r),(function(t,r){null===t&&n._parseResults(r),"function"==typeof e&&e(t,r)}))};var n},r.prototype._parseResults=function(t){var e,n,r,o;for(r=0;r<t.length;r++)for(e=t[r],e=[].concat(e),o=0;o<e.length;o++)null!==(n=e[o])&&this._parse(n)},r.prototype._tag=function(t,e){return t.$tag||(e=e||window.btoa(Math.random().toString()),Object.defineProperty(t,"$tag",{value:e}),this.cache[e]=t),t},r.prototype._parse=function(t){var e=Object.assign(this.cache[t.tag]||{},t.msg);return this._tag(e,t.tag)},r.prototype._format=function(t){return this._tag(t),{tag:t.$tag,msg:t}}},{}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=u(t("classnames")),o=t("preact"),i=u(t("prop-types")),a=t("../../shared/shortcut"),s=u(t("../../shared/components/svg-icon"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=t.badgeCount,n=t.icon,r=t.label,i=t.onClick,u=t.shortcut;(0,a.useShortcut)(u,i);var l=u?"".concat(r," (").concat(u,")"):r;return(0,o.createElement)("button",{className:"annotator-adder-actions__button",onClick:i,"aria-label":l,title:l},n&&(0,o.createElement)(s.default,{name:n,className:"annotator-adder-actions__icon"}),"number"==typeof e&&(0,o.createElement)("span",{className:"annotator-adder-actions__badge"},e),(0,o.createElement)("span",{className:"annotator-adder-actions__label"},r))}function c(t){var e=t.arrowDirection,n=t.isVisible,i=t.onCommand,a=t.annotationCount,s=void 0===a?0:a,u=function(t,e){t.preventDefault(),t.stopPropagation(),i(e)},c=n?"a":null,f=n?"h":null,h=n?"s":null;return(0,o.createElement)("hypothesis-adder-toolbar",{class:(0,r.default)("annotator-adder",{"annotator-adder--arrow-down":"down"===e,"annotator-adder--arrow-up":"up"===e,"is-active":n}),style:{visibility:n?"visible":"hidden"}},(0,o.createElement)("hypothesis-adder-actions",{className:"annotator-adder-actions"},(0,o.createElement)(l,{icon:"annotate",onClick:function(t){return u(t,"annotate")},label:"Annotate",shortcut:c}),(0,o.createElement)(l,{icon:"highlight",onClick:function(t){return u(t,"highlight")},label:"Highlight",shortcut:f}),s>0&&(0,o.createElement)("div",{className:"annotator-adder-actions__separator"}),s>0&&(0,o.createElement)(l,{badgeCount:s,onClick:function(t){return u(t,"show")},label:"Show",shortcut:h})))}l.propTypes={badgeCount:i.default.number,icon:i.default.string,label:i.default.string.isRequired,onClick:i.default.func.isRequired,shortcut:i.default.string},c.propTypes={arrowDirection:i.default.oneOf(["up","down"]).isRequired,isVisible:i.default.bool.isRequired,onCommand:i.default.func.isRequired,annotationCount:i.default.number}},{"../../shared/components/svg-icon":95,"../../shared/shortcut":100,classnames:2,preact:35,"prop-types":38}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=s(t("classnames")),o=s(t("prop-types")),i=t("preact"),a=s(t("../../shared/components/svg-icon"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){var e=t.buttonRef,n=t.expanded,o=t.extraClasses,s=t.label,u=t.icon,l=t.onClick,c=t.selected,f=void 0!==c&&c;return(0,i.createElement)("button",{className:(0,r.default)("annotator-frame-button",o),"aria-label":s,"aria-expanded":n,"aria-pressed":f,onClick:function(t){t.stopPropagation(),l()},ref:e,title:s},(0,i.createElement)(a.default,{name:u}))}function l(t){var e=t.closeSidebar,n=t.createAnnotation,r=t.isSidebarOpen,o=t.newAnnotationType,a=t.showHighlights,s=t.toggleHighlights,l=t.toggleSidebar,c=t.toggleSidebarRef,f=t.useMinimalControls,h=void 0!==f&&f;return(0,i.createElement)("div",null,h&&r&&(0,i.createElement)(u,{extraClasses:"annotator-frame-button--sidebar_close",label:"Close annotation sidebar",icon:"cancel",onClick:e}),!h&&(0,i.createElement)(u,{extraClasses:"annotator-frame-button--sidebar_toggle",buttonRef:c,label:"Annotation sidebar",icon:r?"caret-right":"caret-left",expanded:r,onClick:l}),!h&&(0,i.createElement)(u,{label:"Show highlights",icon:a?"show":"hide",selected:a,onClick:s}),!h&&(0,i.createElement)(u,{label:"note"===o?"New page note":"New annotation",icon:"note"===o?"note":"annotate",onClick:n}))}u.propTypes={buttonRef:o.default.any,expanded:o.default.bool,extraClasses:o.default.string,label:o.default.string.isRequired,icon:o.default.string.isRequired,onClick:o.default.func.isRequired,selected:o.default.bool},l.propTypes={closeSidebar:o.default.func.isRequired,createAnnotation:o.default.func.isRequired,isSidebarOpen:o.default.bool.isRequired,newAnnotationType:o.default.oneOf(["annotation","note"]).isRequired,showHighlights:o.default.bool.isRequired,toggleHighlights:o.default.func.isRequired,toggleSidebar:o.default.func.isRequired,toggleSidebarRef:o.default.any,useMinimalControls:o.default.bool}},{"../../shared/components/svg-icon":95,classnames:2,preact:35,"prop-types":38}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return t.hasOwnProperty("hypothesisConfig")?"function"!=typeof t.hypothesisConfig?(console.warn("hypothesisConfig must be a function, see: https://h.readthedocs.io/projects/client/en/latest/publishers/config/#window.hypothesisConfig"),{}):t.hypothesisConfig():{}}},{}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,o.default)(t);return{annotations:e.annotations,assetRoot:e.hostPageSetting("assetRoot",{allowInBrowserExt:!0}),branding:e.hostPageSetting("branding"),clientUrl:e.clientUrl,enableExperimentalNewNoteButton:e.hostPageSetting("enableExperimentalNewNoteButton"),enableExperimentalPDFSideBySide:e.hostPageSetting("enableExperimentalPDFSideBySide",{coerce:i.toBoolean,defaultValue:!1}),group:e.group,focus:e.hostPageSetting("focus"),theme:e.hostPageSetting("theme"),usernameUrl:e.hostPageSetting("usernameUrl"),onLayoutChange:e.hostPageSetting("onLayoutChange"),openSidebar:e.hostPageSetting("openSidebar",{allowInBrowserExt:!0,coerce:i.toBoolean}),query:e.query,requestConfigFromFrame:e.hostPageSetting("requestConfigFromFrame"),services:e.hostPageSetting("services"),showHighlights:e.showHighlights,sidebarAppUrl:e.sidebarAppUrl,subFrameIdentifier:e.hostPageSetting("subFrameIdentifier",{allowInBrowserExt:!0}),externalContainerSelector:e.hostPageSetting("externalContainerSelector")}};var r,o=(r=t("./settings"))&&r.__esModule?r:{default:r},i=t("../../shared/type-coercions")},{"../../shared/type-coercions":101,"./settings":58}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return!(t.startsWith("http://")||t.startsWith("https://"))}},{}],58:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=o.jsonConfigsFrom(t.document),n=(0,i.default)(t);function r(){var e=t.document.querySelector('link[type="application/annotator+html"][rel="sidebar"]');if(!e)throw new Error('No application/annotator+html (rel="sidebar") link in the document');if(!e.href)throw new Error('application/annotator+html (rel="sidebar") link has no href');return e.href}function s(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.allowInBrowserExt||!1,s=void 0!==o.defaultValue,u="function"==typeof o.coerce?o.coerce:function(t){return t};return!i&&(0,a.default)(r())?s?o.defaultValue:null:n.hasOwnProperty(t)?u(n[t]):e.hasOwnProperty(t)?u(e[t]):s?o.defaultValue:null}return{get annotations(){return e.annotations||((n=t.location.href.match(/#annotations:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get clientUrl(){return function(){var e=t.document.querySelector('link[type="application/annotator+javascript"][rel="hypothesis-client"]');if(!e)throw new Error('No application/annotator+javascript (rel="hypothesis-client") link in the document');if(!e.href)throw new Error('application/annotator+javascript (rel="hypothesis-client") link has no href');return e.href}()},get group(){return e.group||((n=t.location.href.match(/#annotations:group:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get showHighlights(){return null===(t=s("showHighlights"))&&(t="always"),"boolean"==typeof t?t?"always":"never":t;var t},get sidebarAppUrl(){return r()},get query(){return e.query||function(){var e=t.location.href.match(/#annotations:(query|q):(.+)$/i);if(e)try{return decodeURIComponent(e[2])}catch(t){}return null}()},hostPageSetting:s}};var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("../../shared/settings")),i=s(t("./config-func-settings-from")),a=s(t("./is-browser-extension"));function s(t){return t&&t.__esModule?t:{default:t}}function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}},{"../../shared/settings":99,"./config-func-settings-from":55,"./is-browser-extension":57}],59:[function(t,e,n){var r,o,i,a,s=[].slice,u={}.hasOwnProperty;r=t("jquery"),e.exports=o=function(){function t(t,e){this.options=r.extend(!0,{},this.options,e),this.element=r(t),this._closures={},this.on=this.subscribe,this.addEvents()}return t.prototype.events={},t.prototype.options={},t.prototype.element=null,t.prototype.destroy=function(){return this.removeEvents()},t.prototype.addEvents=function(){var e,n,r,o,i;for(i=[],n=0,r=(o=t._parseEvents(this.events)).length;n<r;n++)e=o[n],i.push(this._addEvent(e.selector,e.event,e.functionName));return i},t.prototype.removeEvents=function(){var e,n,r,o,i;for(i=[],n=0,r=(o=t._parseEvents(this.events)).length;n<r;n++)e=o[n],i.push(this._removeEvent(e.selector,e.event,e.functionName));return i},t.prototype._addEvent=function(e,n,r){var o,i;return i=this,o=function(){return i[r].apply(i,arguments)},""===e&&t._isCustomEvent(n)?this.subscribe(n,o):this.element.delegate(e,n,o),this._closures[e+"/"+n+"/"+r]=o,this},t.prototype._removeEvent=function(e,n,r){var o;return o=this._closures[e+"/"+n+"/"+r],""===e&&t._isCustomEvent(n)?this.unsubscribe(n,o):this.element.undelegate(e,n,o),delete this._closures[e+"/"+n+"/"+r],this},t.prototype.publish=function(){return this.element.triggerHandler.apply(this.element,arguments),this},t.prototype.subscribe=function(t,e){var n;return(n=function(){return e.apply(this,[].slice.call(arguments,1))}).guid=e.guid=r.guid+=1,this.element.bind(t,n),this},t.prototype.unsubscribe=function(){return this.element.unbind.apply(this.element,arguments),this},t}(),o._parseEvents=function(t){var e,n,r,o,i,a,u;for(a in n=[],t)r=t[a],u=2<=(i=a.split(" ")).length?s.call(i,0,o=i.length-1):(o=0,[]),e=i[o++],n.push({selector:u.join(" "),event:e,functionName:r});return n},o.natives=(a=function(){var t,e;for(i in e=[],t=r.event.special)u.call(t,i)&&(t[i],e.push(i));return e}(),"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error touchstart".split(/[^a-z]+/).concat(a)),o._isCustomEvent=function(t){return t=t.split(".")[0],-1===r.inArray(t,o.natives)}},{jquery:"jquery"}],60:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("../shared/bridge-events")),o=i(t("../shared/warn-once"));function i(t){return t&&t.__esModule?t:{default:t}}var a={},s=function(t){a=t||{}},u={init:function(t){t.on(r.default.FEATURE_FLAGS_UPDATED,s)},reset:function(){s({})},flagEnabled:function(t){return t in a?a[t]:((0,o.default)("looked up unknown feature",t),!1)}};n.default=u},{"../shared/bridge-events":92,"../shared/warn-once":102}],61:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.DEBOUNCE_WAIT=void 0;var o,i=(o=t("lodash.debounce"))&&o.__esModule?o:{default:o},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("./util/frame-util"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.DEBOUNCE_WAIT=40;var f=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._target=e,this._handledFrames=[],this._mutationObserver=new MutationObserver((0,i.default)((function(){n._discoverFrames()}),40))}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"observe",value:function(t,e){this._onFrameAdded=t,this._onFrameRemoved=e,this._discoverFrames(),this._mutationObserver.observe(this._target,{childList:!0,subtree:!0})}},{key:"disconnect",value:function(){this._mutationObserver.disconnect()}},{key:"_addFrame",value:function(t){var e=this;a.isAccessible(t)&&a.isDocumentReady(t,(function(){t.contentWindow.addEventListener("unload",(function(){e._removeFrame(t)})),e._handledFrames.push(t),e._onFrameAdded(t)}))}},{key:"_removeFrame",value:function(t){this._onFrameRemoved(t),this._handledFrames=this._handledFrames.filter((function(e){return e!==t}))}},{key:"_discoverFrames",value:function(){var t,e=a.findFrames(this._target),n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._handledFrames.includes(r)||this._addFrame(r)}}catch(t){n.e(t)}finally{n.f()}var o,i=u(function(t,e){return t.filter((function(t){return!e.includes(t)}))}(this._handledFrames,e));try{for(i.s();!(o=i.n()).done;){var s=o.value;this._removeFrame(s)}}catch(t){i.e(t)}finally{i.f()}}}]),t}();n.default=f},{"./util/frame-util":80,"lodash.debounce":34}],62:[function(t,e,n){var r,o,i,a,s,u,l,c,f,h,d,p,g,v,m,y={}.hasOwnProperty,_=[].slice,b=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};g=t("scroll-into-view"),o=t("custom-event"),i=t("./delegator"),r=t("jquery"),s=t("./adder"),h=t("./anchoring/html"),f=t("./highlighter"),p=t("./range-util"),v=t("./selections").default,m=t("./anchoring/range"),c=t("../shared/dom-element").closest,d=t("./util/url").normalizeURI,u=function(t){return new Promise((function(e,n){return requestAnimationFrame((function(){try{return e(t())}catch(t){return n(t)}}))}))},l=function(){var t;return t=window.getSelection().getRangeAt(0),p.itemsForRange(t,(function(t){return r(t).data("annotation")}))},a='[class^="annotator-"],[class^="hypothesis-"]',e.exports=function(t){var e;function n(t,e,o){var i,a,u,l,c,f;for(a in null==o&&(o=h),n.__super__.constructor.apply(this,arguments),this.adder=r(this.html.adder).appendTo(this.element).hide(),c=this,this.adderCtrl=new s.Adder(this.adder[0],{onAnnotate:function(){return c.createAnnotation(),document.getSelection().removeAllRanges()},onHighlight:function(){return c.setVisibleHighlights(!0),c.createHighlight(),document.getSelection().removeAllRanges()},onShowAnnotations:function(t){return c.selectAnnotations(t)}}),this.selections=v(document).subscribe({next:function(t){return t?c._onSelection(t):c._onClearSelection()}}),this.plugins={},this.anchors=[],this.frameIdentifier=e.subFrameIdentifier||null,this.anchoring=o,i={config:e,on:(f=this,function(t,e){return f.subscribe(t,e)}),emit:function(t){return function(){var e,n;return n=arguments[0],e=2<=arguments.length?_.call(arguments,1):[],t.publish(n,e)}}(this)},this.addPlugin("CrossFrame",i),this.crossframe=this.plugins.CrossFrame,this.crossframe.onConnect(function(t){return function(){return t._setupInitialState(e)}}(this)),this.closeSidebarOnDocumentClick=!0,this._connectAnnotationSync(this.crossframe),this._connectAnnotationUISync(this.crossframe),l=this.options)y.call(l,a)&&(u=l[a],!this.plugins[a]&&this.options.pluginClasses[a]&&this.addPlugin(a,u))}return function(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,i),e="hypothesis-highlights-always-on",n.prototype.events={".hypothesis-highlight click":"onHighlightClick",".hypothesis-highlight mouseover":"onHighlightMouseover",".hypothesis-highlight mouseout":"onHighlightMouseout",click:"onElementClick",touchstart:"onElementTouchStart"},n.prototype.options={Document:{},TextSelection:{}},n.prototype.anchoring=null,n.prototype.plugins=null,n.prototype.anchors=null,n.prototype.visibleHighlights=!1,n.prototype.frameIdentifier=null,n.prototype.html={adder:"<hypothesis-adder></hypothesis-adder>"},n.prototype.addPlugin=function(t,e){var n,r;return this.plugins[t]?console.error("You cannot have more than one instance of any plugin."):"function"==typeof(r=this.options.pluginClasses[t])?(this.plugins[t]=new r(this.element[0],e),this.plugins[t].annotator=this,"function"==typeof(n=this.plugins[t]).pluginInit&&n.pluginInit()):console.error("Could not load "+t+" plugin. Have you included the appropriate <script> tag?"),this},n.prototype.getDocumentInfo=function(){var t,e,n;return null!=this.plugins.PDF?(t=Promise.resolve(this.plugins.PDF.getMetadata()),e=Promise.resolve(this.plugins.PDF.uri())):null!=this.plugins.Document?(e=Promise.resolve(this.plugins.Document.uri()),t=Promise.resolve(this.plugins.Document.metadata)):(e=Promise.reject(),t=Promise.reject()),e=e.catch((function(){return decodeURIComponent(window.location.href)})),t=t.catch((function(){return{title:document.title,link:[{href:decodeURIComponent(window.location.href)}]}})),Promise.all([t,e]).then((n=this,function(t){var e,r;return r=t[0],e=t[1],{uri:d(e),metadata:r,frameIdentifier:n.frameIdentifier}}))},n.prototype._setupInitialState=function(t){return this.publish("panelReady"),this.setVisibleHighlights("always"===t.showHighlights)},n.prototype._connectAnnotationSync=function(t){var e;return this.subscribe("annotationDeleted",(e=this,function(t){return e.detach(t)})),this.subscribe("annotationsLoaded",function(t){return function(e){var n,r,o,i;for(i=[],r=0,o=e.length;r<o;r++)n=e[r],i.push(t.anchor(n));return i}}(this))},n.prototype._connectAnnotationUISync=function(t){var e;return t.on("focusAnnotations",(e=this,function(t){var n,o,i,a,s,u,l;for(null==t&&(t=[]),u=[],o=0,i=(a=e.anchors).length;o<i;o++)null!=(n=a[o]).highlights&&(s=n.annotation.$tag,l=b.call(t,s)>=0,u.push(r(n.highlights).toggleClass("hypothesis-highlight-focused",l)));return u})),t.on("scrollToAnnotation",function(t){return function(e){var n,r,i,a,s,u;for(u=[],i=0,a=(s=t.anchors).length;i<a;i++)null!=(n=s[i]).highlights&&(n.annotation.$tag===e?(r=new o("scrolltorange",{bubbles:!0,cancelable:!0,detail:n.range}),t.element[0].dispatchEvent(r)?u.push(g(n.highlights[0])):u.push(void 0)):u.push(void 0));return u}}(this)),t.on("getDocumentInfo",function(t){return function(e){return t.getDocumentInfo().then((function(t){return e(null,t)})).catch((function(t){return e(t)}))}}(this)),t.on("setVisibleHighlights",function(t){return function(e){return t.setVisibleHighlights(e)}}(this))},n.prototype.destroy=function(){var t,e;for(t in r("#annotator-dynamic-style").remove(),this.selections.unsubscribe(),this.adder.remove(),this.element.find(".hypothesis-highlight").each((function(){return r(this).contents().insertBefore(this),r(this).remove()})),this.element.data("annotator",null),e=this.plugins)e[t],this.plugins[t].destroy();return n.__super__.destroy.apply(this,arguments)},n.prototype.anchor=function(t){var e,n,o,i,s,l,c,h,d,p,g,v,y,_,w,E,S;for(w=this,_=this.element[0],o=[],n=[],i=[],null==t.target&&(t.target=[]),p=function(e){var n,r;return(null!=(r=e.selector)?r:[]).some((function(t){return"TextQuoteSelector"===t.type}))?(n={cache:w.anchoringCache,ignoreSelector:a},w.anchoring.anchor(_,e.selector,n).then((function(n){return{annotation:t,target:e,range:n}})).catch((function(){return{annotation:t,target:e}}))):Promise.resolve({annotation:t,target:e})},s=function(t){return null==t.range?t:u((function(){var e,n;return n=m.sniff(t.range).normalize(_),e=f.highlightRange(n),r(e).data("annotation",t.annotation),t.highlights=e,t}))},E=function(e){var n,r,o,i,a,s,u;for(r=!1,o=!1,i=0,a=e.length;i<a;i++)if(null!=(n=e[i]).target.selector&&(r=!0,null!=n.range)){o=!0;break}return t.$orphan=r&&!o,w.anchors=w.anchors.concat(e),null!=(s=w.plugins.BucketBar)&&s.update(),null!=(u=w.plugins.CrossFrame)&&u.sync([t]),e},l=0,h=(g=w.anchors.splice(0,w.anchors.length)).length;l<h;l++)(e=g[l]).annotation===t?null!=e.range&&(v=e.target,b.call(t.target,v)>=0)?(o.push(e),n.push(e.target)):null!=e.highlights&&(i=i.concat(e.highlights),delete e.highlights,delete e.range):w.anchors.push(e);for(requestAnimationFrame((function(){return f.removeHighlights(i)})),c=0,d=(y=t.target).length;c<d;c++)S=y[c],b.call(n,S)<0&&(e=p(S).then(s),o.push(e));return Promise.all(o).then(E)},n.prototype.detach=function(t){var e,n,r,o,i,a,s,u,l;for(n=[],u=[],r=0,o=(i=this.anchors).length;r<o;r++)(e=i[r]).annotation===t?u.push(null!=(a=e.highlights)?a:[]):n.push(e);return this.anchors=n,u=(s=Array.prototype).concat.apply(s,u),requestAnimationFrame((l=this,function(){var t;return f.removeHighlights(u),null!=(t=l.plugins.BucketBar)?t.update():void 0}))},n.prototype.createAnnotation=function(t){var e,n,r,o,i,s,u,l,c,f,h;return null==t&&(t={}),l=this,s=this.element[0],r=null!=(o=this.selectedRanges)?o:[],this.selectedRanges=null,e=function(t){var e;return e={cache:l.anchoringCache,ignoreSelector:a},l.anchoring.describe(s,t,e)},c=function(e){return t.document=e.metadata,t.uri=e.uri},f=function(e){var n,r,o,i;return n=e[0],o=e[1],i=n.uri,t.target=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push({source:i,selector:r});return n}()},n=this.getDocumentInfo(),u=Promise.all(r.map(e)),n.then(c),(h=Promise.all([n,u]).then(f)).then((function(){return l.publish("beforeAnnotationCreated",[t])})),h.then((function(){return l.anchor(t)})),t.$highlight||null!=(i=this.crossframe)&&i.call("showSidebar"),t},n.prototype.createHighlight=function(){return this.createAnnotation({$highlight:!0})},n.prototype.createComment=function(){var t,e,n;return t={},n=this,e=function(e){return t.document=e.metadata,t.uri=e.uri,t.target=[{source:e.uri}]},this.getDocumentInfo().then(e).then((function(){return n.publish("beforeAnnotationCreated",[t])})),t},n.prototype.deleteAnnotation=function(t){var e,n,o,i;if(null!=t.highlights)for(n=0,o=(i=t.highlights).length;n<o;n++)null!=(e=i[n]).parentNode&&r(e).replaceWith(e.childNodes);return this.publish("annotationDeleted",[t]),t},n.prototype.showAnnotations=function(t){var e,n,r,o;return o=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)&&n.call("showAnnotations",o),null!=(r=this.crossframe)?r.call("showSidebar"):void 0},n.prototype.toggleAnnotationSelection=function(t){var e,n,r;return r=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)?n.call("toggleAnnotationSelection",r):void 0},n.prototype.updateAnnotations=function(t){var e,n,r;return r=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)?n.call("updateAnnotations",r):void 0},n.prototype.focusAnnotations=function(t){var e,n,r;return r=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)?n.call("focusAnnotations",r):void 0},n.prototype._onSelection=function(t){var e,n,r,o,i,a,s,u;if(s=document.getSelection(),r=p.isSelectionBackwards(s),n=p.selectionFocusRect(s))return this.selectedRanges=[t],null!=(i=this.toolbar)&&(i.newAnnotationType="annotation"),o=(a=this.adderCtrl.target(n,r)).left,u=a.top,e=a.arrowDirection,this.adderCtrl.annotationsForSelection=l(),this.adderCtrl.showAt(o,u,e);this._onClearSelection()},n.prototype._onClearSelection=function(){var t;return this.adderCtrl.hide(),this.selectedRanges=[],null!=(t=this.toolbar)?t.newAnnotationType="note":void 0},n.prototype.selectAnnotations=function(t,e){return e?this.toggleAnnotationSelection(t):this.showAnnotations(t)},n.prototype.isEventInAnnotator=function(t){return null!==c(t.target,".annotator-frame")},n.prototype.onElementClick=function(t){var e,n,r;if(this.closeSidebarOnDocumentClick&&!this.isEventInAnnotator(t)&&!(null!=(e=this.selectedTargets)?e.length:void 0)&&!(null!=(n=t.annotations)?n.length:void 0))return null!=(r=this.crossframe)?r.call("hideSidebar"):void 0},n.prototype.onElementTouchStart=function(t){var e,n,r;if(this.closeSidebarOnDocumentClick&&!this.isEventInAnnotator(t)&&!(null!=(e=this.selectedTargets)?e.length:void 0)&&!(null!=(n=t.annotations)?n.length:void 0))return null!=(r=this.crossframe)?r.call("hideSidebar"):void 0},n.prototype.onHighlightMouseover=function(t){var e,n,o;if(this.visibleHighlights)return e=r(t.currentTarget).data("annotation"),(n=null!=t.annotations?t.annotations:t.annotations=[]).push(e),t.target===t.currentTarget?setTimeout((o=this,function(){return o.focusAnnotations(n)})):void 0},n.prototype.onHighlightMouseout=function(t){if(this.visibleHighlights)return this.focusAnnotations([])},n.prototype.onHighlightClick=function(t){var e,n,o,i;if(this.visibleHighlights)return e=r(t.currentTarget).data("annotation"),(n=null!=t.annotations?t.annotations:t.annotations=[]).push(e),t.target===t.currentTarget?(o=t.metaKey||t.ctrlKey,setTimeout((i=this,function(){return i.selectAnnotations(n,o)}))):void 0},n.prototype.setVisibleHighlights=function(t){return this.toggleHighlightClass(t)},n.prototype.toggleHighlightClass=function(t){var n;return t?this.element.addClass(e):this.element.removeClass(e),this.visibleHighlights=t,null!=(n=this.toolbar)?n.highlightsVisible=t:void 0},n}()},{"../shared/dom-element":97,"./adder":43,"./anchoring/html":44,"./anchoring/range":46,"./delegator":59,"./highlighter":63,"./range-util":75,"./selections":76,"./util/url":83,"custom-event":3,jquery:"jquery","scroll-into-view":40}],63:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.highlightRange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hypothesis-highlight",n=/^\s*$/,o=t.textNodes(),i=o.length>0&&null!==(0,r.closest)(o[0].parentNode,".annotator-placeholder"),s=[],u=null,l=null;o.forEach((function(t){u&&u.nextSibling===t?l.push(t):(l=[t],s.push(l)),u=t})),s=s.filter((function(t){return t.some((function(t){return!n.test(t.nodeValue)}))}));var c=[];return s.forEach((function(t){var n=document.createElement("hypothesis-highlight");if(n.className=e,t[0].parentNode.replaceChild(n,t[0]),t.forEach((function(t){return n.appendChild(t)})),!i){var r=a(n);r&&(n.className+=" is-transparent",n.svgHighlight=r)}c.push(n)})),c},n.removeHighlights=function(t){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.parentNode&&s(r,Array.from(r.childNodes)),r.svgHighlight&&r.svgHighlight.remove()}}catch(t){n.e(t)}finally{n.f()}},n.getBoundingClientRect=function(t){return t.map((function(t){return t.getBoundingClientRect()})).reduce((function(t,e){return{top:Math.min(t.top,e.top),left:Math.min(t.left,e.left),bottom:Math.max(t.bottom,e.bottom),right:Math.max(t.right,e.right)}}))};var r=t("../shared/dom-element");function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i="http://www.w3.org/2000/svg";function a(t){var e=function(t){var e=(0,r.closest)(t,".page");return e&&e.querySelector(".canvasWrapper > canvas")||null}(t);if(!e||!e.parentElement)return null;var n=e.parentElement.querySelector(".hypothesis-highlight-layer"),o=function(t,e){return"function"==typeof CSS&&"function"==typeof CSS.supports&&CSS.supports(t,e)}("mix-blend-mode","multiply");if(!n){(n=document.createElementNS(i,"svg")).setAttribute("class","hypothesis-highlight-layer"),e.parentElement.appendChild(n),e.parentElement.style.position="relative";var a=n.style;a.position="absolute",a.left="0",a.top="0",a.width="100%",a.height="100%",o?a.mixBlendMode="multiply":a.opacity="0.3"}var s=e.getBoundingClientRect(),u=t.getBoundingClientRect(),l=document.createElementNS(i,"rect");return l.setAttribute("x",(u.left-s.left).toString()),l.setAttribute("y",(u.top-s.top).toString()),l.setAttribute("width",u.width.toString()),l.setAttribute("height",u.height.toString()),o?l.setAttribute("class","hypothesis-svg-highlight"):l.setAttribute("class","hypothesis-svg-highlight is-opaque"),n.appendChild(l),l}function s(t,e){var n=t.parentNode;e.forEach((function(e){return n.insertBefore(e,t)})),t.remove()}},{"../shared/dom-element":97}],64:[function(t,e,n){var r,o,i={}.hasOwnProperty;r=t("jquery"),o=t("./guest"),e.exports=function(t){function e(t,n){var o,i,a,s,u,l,c;(null!=(s=n.services)?s[0]:void 0)&&((u=n.services[0]).onLoginRequest&&(u.onLoginRequestProvided=!0),u.onLogoutRequest&&(u.onLogoutRequestProvided=!0),u.onSignupRequest&&(u.onSignupRequestProvided=!0),u.onProfileRequest&&(u.onProfileRequestProvided=!0),u.onHelpRequest&&(u.onHelpRequestProvided=!0)),i="config="+encodeURIComponent(JSON.stringify(Object.assign({},n,{sidebarAppUrl:void 0,pluginClasses:void 0}))),l=n.sidebarAppUrl+"#"+i,o=r("<iframe></iframe>").attr("name","hyp_sidebar_frame").attr("allowfullscreen","").attr("seamless","").attr("src",l).attr("title","Hypothesis annotation viewer").addClass("h-sidebar-iframe"),a=null,n.externalContainerSelector&&(a=document.querySelector(n.externalContainerSelector)),a?this.externalFrame=r(a):(this.frame=r("<div></div>").css("display","none").addClass("annotator-frame annotator-outer"),"clean"===n.theme&&this.frame.addClass("annotator-frame--drop-shadow-enabled"),this.frame.appendTo(t)),e.__super__.constructor.apply(this,arguments),o.appendTo(this.frame||this.externalFrame),this.on("panelReady",(c=this,function(){var t;return null!=(t=c.frame)?t.css("display",""):void 0})),this.on("beforeAnnotationCreated",(function(t){if(!t.$highlight)return o[0].contentWindow.focus()}))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,o),e.prototype.destroy=function(){var t;return null!=(t=this.frame)&&t.remove(),e.__super__.destroy.apply(this,arguments)},e}()},{"./guest":62,jquery:"jquery"}],65:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={annotate:t("../images/icons/annotate.svg"),cancel:t("../images/icons/cancel.svg"),"caret-left":t("../images/icons/caret-left.svg"),"caret-right":t("../images/icons/caret-right.svg"),hide:t("../images/icons/hide.svg"),highlight:t("../images/icons/highlight.svg"),note:t("../images/icons/note.svg"),show:t("../images/icons/show.svg")};n.default=r},{"../images/icons/annotate.svg":84,"../images/icons/cancel.svg":85,"../images/icons/caret-left.svg":86,"../images/icons/caret-right.svg":87,"../images/icons/hide.svg":88,"../images/icons/highlight.svg":89,"../images/icons/note.svg":90,"../images/icons/show.svg":91}],66:[function(t,e,n){"use strict";var r=p(t("jquery"));t("focus-visible");var o=t("../shared/components/svg-icon"),i=p(t("./icons")),a=p(t("./config/index")),s=p(t("./pdf-sidebar")),u=p(t("./plugin/document")),l=p(t("./guest")),c=p(t("./plugin/bucket-bar")),f=p(t("./plugin/cross-frame")),h=p(t("./plugin/pdf")),d=p(t("./sidebar"));function p(t){return t&&t.__esModule?t:{default:t}}(0,o.registerIcons)(i.default);var g={BucketBar:c.default,PDF:h.default,Document:u.default,CrossFrame:f.default},v=window,m=document.querySelector('link[type="application/annotator+html"][rel="sidebar"]'),y=(0,a.default)(window);r.default.noConflict(!0)((function(){var t=void 0!==v.PDFViewerApplication,e=t?s.default:d.default;y.subFrameIdentifier&&(t&&(y.PDF={}),e=l.default,v.__hypothesis_frame=!0),y.pluginClasses=g;var n=new e(document.body,y);m.addEventListener("destroy",(function(){m.remove(),n.destroy()}))}))},{"../shared/components/svg-icon":95,"./config/index":56,"./guest":62,"./icons":65,"./pdf-sidebar":67,"./plugin/bucket-bar":70,"./plugin/cross-frame":71,"./plugin/document":72,"./plugin/pdf":74,"./sidebar":78,"focus-visible":31,jquery:"jquery"}],67:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./sidebar"))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p={TextSelection:{},PDF:{},BucketBar:{container:".annotator-frame",scrollables:["#viewerContainer"]},Toolbar:{container:".annotator-frame"}},g=function(t){c(n,o.default);var e=f(n);function n(t,r){var o,i,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(u=e.call(this,t,s(s({},p),r)))._lastSidebarLayoutState={expanded:!1,width:0,height:0},u.window=window,u.pdfViewer=null===(o=u.window.PDFViewerApplication)||void 0===o?void 0:o.pdfViewer,u.pdfContainer=null===(i=u.window.PDFViewerApplication)||void 0===i||null===(a=i.appConfig)||void 0===a?void 0:a.appContainer,u.sideBySide=!!(r.enableExperimentalPDFSideBySide&&u.pdfViewer&&u.pdfContainer),u.sideBySideActive=!1,u.sideBySide&&(u.subscribe("sidebarLayoutChanged",(function(t){return u.fitSideBySide(t)})),u.window.addEventListener("resize",(function(){return u.fitSideBySide()}))),u}return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(n,[{key:"activateSideBySide",value:function(t){this.sideBySideActive=!0,this.closeSidebarOnDocumentClick=!1,this.pdfContainer.style.width=t+"px",this.pdfContainer.classList.add("hypothesis-side-by-side")}},{key:"deactivateSideBySide",value:function(){this.sideBySideActive=!1,this.closeSidebarOnDocumentClick=!0,this.pdfContainer.style.width="auto",this.pdfContainer.classList.remove("hypothesis-side-by-side")}},{key:"fitSideBySide",value:function(t){t||(t=this._lastSidebarLayoutState);var e=this.window.innerWidth-t.width;t.expanded&&e>=680?this.activateSideBySide(e):this.deactivateSideBySide();var n=this.pdfViewer.currentScaleValue;"auto"!==n&&"page-fit"!==n&&"page-width"!==n||(this.pdfViewer.currentScaleValue=n),this.pdfViewer.update(),this._lastSidebarLayoutState=t}}]),n}();n.default=g},{"./sidebar":78}],68:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};n.default=r},{}],69:[function(t,e,n){var r,o={}.hasOwnProperty;r=t("./delegator"),e.exports=function(t){function e(t,n){e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,r),e.prototype.pluginInit=function(){},e}()},{"./delegator":59}],70:[function(t,e,n){var r,o,i,a,s,u,l,c,f={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("jquery"),s=t("../plugin"),l=t("scroll-into-view"),u=t("../highlighter"),i=115+(o=6+16),c=function(t,e){var n,r;return n="up"===e?1:-1,r=t.reduce((function(t,e){var a,s,l;return(null!=(s=e.highlights)?s.length:void 0)?(l=t.start,r=t.next,a=u.getBoundingClientRect(e.highlights),1===n&&a.top>=i||-1===n&&a.top<=window.innerHeight-o?t:null==r||l*n<a.top*n?{start:a.top,next:e}:t):t}),{}).next,l(r.highlights[0])},e.exports=a=function(t){function e(t,n){var o;this.update=function(t,e){return function(){return t.apply(e,arguments)}}(this.update,this),e.__super__.constructor.call(this,r(this.html),n),null!=this.options.container?r(this.options.container).append(this.element):r(t).append(this.element),this.highlighter=null!=(o=n.highlighter)?o:u}return function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,s),e.prototype.html='<div class="annotator-bucket-bar">\n</div>',e.prototype.options={gapSize:60,scrollables:["body"]},e.prototype.buckets=[],e.prototype.index=[],e.prototype.tabs=null,e.prototype.pluginInit=function(){var t,e,n,o,i,a;for(r(window).on("resize scroll",this.update),i=[],t=0,e=(o=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)a=o[t],i.push(r(a).on("resize scroll",this.update));return i},e.prototype.destroy=function(){var t,e,n,o,i,a;for(r(window).off("resize scroll",this.update),i=[],t=0,e=(o=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)a=o[t],i.push(r(a).off("resize scroll",this.update));return i},e.prototype._collate=function(t,e){var n,r,o;for(n=r=0,o=t.length-1;0<=o?r<=o:r>=o;n=0<=o?++r:--r){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},e.prototype.update=function(){var t;if(null==this._updatePending)return this._updatePending=requestAnimationFrame((t=this,function(){return delete t._updatePending,t._update()}))},e.prototype._update=function(){var t,e,n,a,s,u,l,f,d,p,g;for(t=[],n=[],f=this.annotator.anchors.reduce((g=this,function(e,r,a){var s,u,l,c;return(null!=(l=r.highlights)?l.length:void 0)?(c=(u=g.highlighter.getBoundingClientRect(r.highlights)).top,s=u.bottom-u.top,c<i?h.call(t,r)<0&&t.push(r):c>window.innerHeight-o?h.call(n,r)<0&&n.push(r):(e.push([c,1,r]),e.push([c+s,-1,r])),e):e}),[]),d=f.sort(this._collate).reduce(function(t){return function(e,n,r,o){var i,a,s,u,l,c,f,d,p,g,v,m,y,_,b,w;if(s=e.buckets,c=e.index,u=e.carry,w=n[0],l=n[1],i=n[2],l>0?(f=u.anchors.indexOf(i))<0?(u.anchors.unshift(i),u.counts.unshift(1)):u.counts[f]++:(f=u.anchors.indexOf(i),0==--u.counts[f]&&(u.anchors.splice(f,1),u.counts.splice(f,1))),0===c.length||r===o.length-1||0===u.anchors.length||w-c[c.length-1]>t.options.gapSize)s.push(u.anchors.slice()),c.push(w);else{for((null!=(y=s[s.length-2])?y.length:void 0)?(g=s[s.length-2],b=s.pop(),c.pop()):(g=s[s.length-1],b=[]),d=0,v=(_=u.anchors).length;d<v;d++)a=_[d],h.call(g,a)<0&&g.push(a);for(p=0,m=b.length;p<m;p++)a=b[p],h.call(g,a)<0&&g.push(a)}return{buckets:s,index:c,carry:u}}}(this),{buckets:[],index:[],carry:{anchors:[],counts:[],latest:0}}),this.buckets=d.buckets,this.index=d.index,this.buckets.unshift([],t,[]),this.index.unshift(0,i-1,i),this.buckets.push([],n,[]),this.index.push(window.innerHeight-o,window.innerHeight-o+1,window.innerHeight),l=0,s=0,u=(p=this.buckets).length;s<u;s++)e=p[s],l=Math.max(l,e.length);return a=this.element,this.tabs||(this.tabs=r([])),this.tabs.slice(this.buckets.length).remove(),this.tabs=this.tabs.slice(0,this.buckets.length),r.each(this.buckets.slice(this.tabs.length),function(t){return function(){var e;return e=r("<div/>").appendTo(a),t.tabs.push(e[0]),e.addClass("annotator-bucket-indicator").on("mousemove",(function(e){var n,o,i,a,s,u,l;for(o=t.tabs.index(e.currentTarget),u=[],i=0,a=(s=t.annotator.anchors).length;i<a;i++)n=s[i],l=h.call(t.buckets[o],n)>=0,u.push(r(n.highlights).toggleClass("hypothesis-highlight-focused",l));return u})).on("mouseout",(function(e){var n,o,i,a,s,u;for(o=t.tabs.index(e.currentTarget),u=[],i=0,a=(s=t.buckets[o]).length;i<a;i++)n=s[i],u.push(r(n.highlights).removeClass("hypothesis-highlight-focused"));return u})).on("click",(function(e){var n,r,o;return o=t.tabs.index(e.currentTarget),e.stopPropagation(),t.isUpper(o)?c(t.buckets[o],"up"):t.isLower(o)?c(t.buckets[o],"down"):(r=function(){var t,e,r,i;for(i=[],t=0,e=(r=this.buckets[o]).length;t<e;t++)n=r[t],i.push(n.annotation);return i}.call(t),t.annotator.selectAnnotations(r,e.ctrlKey||e.metaKey))}))}}(this)),this._buildTabs(this.tabs,this.buckets)},e.prototype._buildTabs=function(){return this.tabs.each((t=this,function(e,n){var i,a,s,u;if(n=r(n),u=1!==(a=null!=(i=t.buckets[e])?i.length:void 0)?"Show "+a+" annotations":a>0?"Show one annotation":void 0,n.attr("title",u),n.toggleClass("upper",t.isUpper(e)),n.toggleClass("lower",t.isLower(e)),s=t.isUpper(e)||t.isLower(e)?o:16,n.css({top:(t.index[e]+t.index[e+1])/2,marginTop:-s/2,display:a?"":"none"}),i)return n.html("<div class='label'>"+a+"</div>")}));var t},e.prototype.isUpper=function(t){return 1===t},e.prototype.isLower=function(t){return t===this.index.length-2},e}(),a.BUCKET_SIZE=16,a.BUCKET_NAV_SIZE=o,a.BUCKET_TOP_THRESHOLD=i},{"../highlighter":63,"../plugin":69,jquery:"jquery","scroll-into-view":40}],71:[function(t,e,n){var r,o,i,a,s,u,l,c=[].slice,f={}.hasOwnProperty;u=t("../plugin"),r=t("../annotation-sync").default,o=t("../../shared/bridge").default,i=t("../../shared/discovery").default,s=t("../util/frame-util"),a=t("../frame-observer").default,l=l=function(){var t,e,n,r,o,i;for(o=arguments[0],i={},t=0,r=(n=2<=arguments.length?c.call(arguments,1):[]).length;t<r;t++)e=n[t],o.hasOwnProperty(e)&&(i[e]=o[e]);return i},e.exports=function(t){function e(t,n){var f,h,d,p,g,v,m,y,_;e.__super__.constructor.apply(this,arguments),g=n.config,_=l(n,"server"),v=new i(window,_),p=new o,_=l(n,"on","emit"),d=new r(p,_),y=new a(t),m=new Map,this.pluginInit=function(){var t;return t=function(t,e,n){return p.createChannel(t,e,n)},v.startDiscovery(t),y.observe(h,f)},this.destroy=function(){return u.prototype.destroy.apply(this,arguments),p.destroy(),v.stopDiscovery(),y.disconnect()},this.sync=function(t,e){return d.sync(t,e)},this.on=function(t,e){return p.on(t,e)},this.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],p.call.apply(p,[e].concat(c.call(t)))},this.onConnect=function(t){return p.onConnect(t)},h=function(t){var e;if(!s.hasHypothesis(t))return e=g.clientUrl,s.isLoaded(t,(function(){var n,r;return r=v.generateToken(),m.set(t,r),n=Object.assign({},g,{subFrameIdentifier:r}),s.injectHypothesis(t,e,n)}))},f=function(t){return p.call("destroyFrame",m.get(t)),m.delete(t)}}return function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,u),e}()},{"../../shared/bridge":93,"../../shared/discovery":96,"../annotation-sync":52,"../frame-observer":61,"../plugin":69,"../util/frame-util":80}],72:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("document-base-uri")),o=a(t("../plugin")),i=t("../util/url");function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(){return{title:document.title,link:[],dc:{},eprints:{},facebook:{},highwire:{},prism:{},twitter:{}}}var v=function(t){f(n,o.default);var e=h(n);function n(t,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(a=e.call(this,t,o)).events={beforeAnnotationCreated:"beforeAnnotationCreated"},a.metadata=g(),a.baseURI=o.baseURI||r.default,a.document=o.document||document,a.normalizeURI=o.normalizeURI||i.normalizeURI,a}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(n,[{key:"pluginInit",value:function(){this.getDocumentMetadata()}},{key:"uri",value:function(){var t,e=decodeURIComponent(this._getDocumentHref()),n=u(this.metadata.link);try{for(n.s();!(t=n.n()).done;){var r=t.value;"canonical"===r.rel&&(e=r.href)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"uris",value:function(){var t,e={},n=u(this.metadata.link);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.href&&(e[r.href]=!0)}}catch(t){n.e(t)}finally{n.f()}return Object.keys(e)}},{key:"beforeAnnotationCreated",value:function(t){t.document=this.metadata}},{key:"getDocumentMetadata",value:function(){return this.metadata=g(),this._getHighwire(),this._getDublinCore(),this._getFacebook(),this._getEprints(),this._getPrism(),this._getTwitter(),this._getFavicon(),this._getTitle(),this._getLinks(),this.metadata}},{key:"_getHighwire",value:function(){this.metadata.highwire=this._getMetaTags("citation","name","_")}},{key:"_getFacebook",value:function(){this.metadata.facebook=this._getMetaTags("og","property",":")}},{key:"_getTwitter",value:function(){this.metadata.twitter=this._getMetaTags("twitter","name",":")}},{key:"_getDublinCore",value:function(){this.metadata.dc=this._getMetaTags("dc","name",".")}},{key:"_getPrism",value:function(){this.metadata.prism=this._getMetaTags("prism","name",".")}},{key:"_getEprints",value:function(){this.metadata.eprints=this._getMetaTags("eprints","name",".")}},{key:"_getMetaTags",value:function(t,e,n){for(var r={},o=0,i=Array.from(this.document.querySelectorAll("meta"));o<i.length;o++){var a=i[o],s=a.getAttribute(e),u=a.content;if(s){var l=s.match(RegExp("^".concat(t).concat(n,"(.+)$"),"i"));if(l){var c=l[1];r[c]?r[c].push(u):r[c]=[u]}}}return r}},{key:"_getTitle",value:function(){this.metadata.highwire.title?this.metadata.title=this.metadata.highwire.title[0]:this.metadata.eprints.title?this.metadata.title=this.metadata.eprints.title[0]:this.metadata.prism.title?this.metadata.title=this.metadata.prism.title[0]:this.metadata.facebook.title?this.metadata.title=this.metadata.facebook.title[0]:this.metadata.twitter.title?this.metadata.title=this.metadata.twitter.title[0]:this.metadata.dc.title?this.metadata.title=this.metadata.dc.title[0]:this.metadata.title=this.document.title}},{key:"_getLinks",value:function(){this.metadata.link=[{href:this._getDocumentHref()}];for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["alternate","canonical","bookmark","shortlink"].includes(n.rel)){if("alternate"===n.rel){if(n.type&&n.type.match(/^application\/(rss|atom)\+xml/))continue;if(n.hreflang)continue}try{var r=this._absoluteUrl(n.href);this.metadata.link.push({href:r,rel:n.rel,type:n.type})}catch(t){}}}for(var o=0,i=Object.keys(this.metadata.highwire);o<i.length;o++){var a=i[o],s=this.metadata.highwire[a];if("pdf_url"===a){var l,c=u(s);try{for(c.s();!(l=c.n()).done;){var f=l.value;try{this.metadata.link.push({href:this._absoluteUrl(f),type:"application/pdf"})}catch(t){}}}catch(t){c.e(t)}finally{c.f()}}if("doi"===a){var h,d=u(s);try{for(d.s();!(h=d.n()).done;){var p=h.value;"doi:"!==p.slice(0,4)&&(p="doi:".concat(p)),this.metadata.link.push({href:p})}}catch(t){d.e(t)}finally{d.f()}}}for(var g=0,v=Object.keys(this.metadata.dc);g<v.length;g++){var m=v[g],y=this.metadata.dc[m];if("identifier"===m){var _,b=u(y);try{for(b.s();!(_=b.n()).done;){var w=_.value;"doi:"===w.slice(0,4)&&this.metadata.link.push({href:w})}}catch(t){b.e(t)}finally{b.f()}}}var E=this.metadata.dc["relation.ispartof"],S=this.metadata.dc.identifier;if(E&&S){var x=E[E.length-1],O=S[S.length-1],T="urn:x-dc:"+encodeURIComponent(x)+"/"+encodeURIComponent(O);this.metadata.link.push({href:T}),this.metadata.documentFingerprint=T}}},{key:"_getFavicon",value:function(){for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["shortcut icon","icon"].includes(n.rel))try{this.metadata.favicon=this._absoluteUrl(n.href)}catch(t){}}}},{key:"_absoluteUrl",value:function(t){return this.normalizeURI(t,this.baseURI)}},{key:"_getDocumentHref",value:function(){var t=this.document.location.href,e=["http:","https:","file:"],n=new URL(t).protocol;return e.includes(n)?t:this.baseURI&&e.includes(new URL(this.baseURI).protocol)?this.baseURI:t}}]),n}();n.default=v},{"../plugin":69,"../util/url":83,"document-base-uri":5}],73:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../util/url");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._loaded=new Promise((function(t){var n,r=function n(){var r;window.removeEventListener("documentload",n),window.removeEventListener("documentloaded",n),null===(r=e.eventBus)||void 0===r||r.off("documentloaded",n),t(e)};e.downloadComplete?t(e):(null===(n=e.initializedPromise)||void 0===n||n.then((function(){var t;null===(t=e.eventBus)||void 0===t||t.on("documentloaded",r)})),window.addEventListener("documentloaded",r),window.addEventListener("documentload",r))}))}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"getUri",value:function(){return this._loaded.then((function(t){var e=s(t);return e||(e=a(t.pdfDocument.fingerprint)),e}))}},{key:"getMetadata",value:function(){return this._loaded.then((function(t){var e=document.title;t.metadata&&t.metadata.has("dc:title")&&"Untitled"!==t.metadata.get("dc:title")?e=t.metadata.get("dc:title"):t.documentInfo&&t.documentInfo.Title&&(e=t.documentInfo.Title);var n=[{href:a(t.pdfDocument.fingerprint)}],r=s(t);return r&&n.push({href:r}),{title:e,link:n,documentFingerprint:t.pdfDocument.fingerprint}}))}}]),t}();function a(t){return"urn:x-pdf:"+String(t)}function s(t){var e=(0,r.normalizeURI)(t.url);return 0!==e.indexOf("file://")?e:null}n.default=i},{"../util/url":83}],74:[function(t,e,n){var r,o,i={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("../plugin"),o=t("../pdfjs-rendering-states").default,e.exports=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,r),n.prototype.documentLoaded=null,n.prototype.observer=null,n.prototype.pdfViewer=null,n.prototype.pluginInit=function(){var e,n;return this.annotator.anchoring=t("../anchoring/pdf"),e=t("./pdf-metadata").default,this.pdfViewer=PDFViewerApplication.pdfViewer,this.pdfViewer.viewer.classList.add("has-transparent-text-layer"),this.pdfMetadata=new e(PDFViewerApplication),this.observer=new MutationObserver((n=this,function(t){return n._update()})),this.observer.observe(this.pdfViewer.viewer,{attributes:!0,attributeFilter:["data-loaded"],childList:!0,subtree:!0})},n.prototype.destroy=function(){return this.pdfViewer.viewer.classList.remove("has-transparent-text-layer"),this.observer.disconnect()},n.prototype.uri=function(){return this.pdfMetadata.getUri()},n.prototype.getMetadata=function(){return this.pdfMetadata.getMetadata()},n.prototype._update=function(){var t,e,n,r,i,s,u,l,c,f,h,d,p,g,v,m,y,_,b,w,E,S,x,O;for(n=this.annotator,x=[],g=i=0,y=(v=this.pdfViewer).pagesCount;0<=y?i<y:i>y;g=0<=y?++i:--i)if(null!=(_=(p=v.getPageView(g)).textLayer)?_.renderingDone:void 0)switch(m=(null!=(b=p.div)?b:p.el).getElementsByClassName("annotator-placeholder")[0],p.renderingState){case o.INITIAL:p.textLayer=null;break;case o.FINISHED:null!=m&&m.parentNode.removeChild(m)}for(u=0,f=(w=n.anchors).length;u<f;u++)if(null!=(t=w[u]).highlights&&(E=t.annotation,!(a.call(x,E)>=0)))for(s=l=0,h=(S=t.highlights).length;l<h;s=++l)if(r=S[s],!document.body.contains(r)){t.highlights.splice(s,1),delete t.range,x.push(t.annotation);break}for(O=[],c=0,d=x.length;c<d;c++)e=x[c],O.push(n.anchor(e));return O},n}()},{"../anchoring/pdf":45,"../pdfjs-rendering-states":68,"../plugin":69,"./pdf-metadata":73}],75:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return t.focusNode===t.anchorNode?t.focusOffset<t.anchorOffset:t.getRangeAt(0).startContainer===t.focusNode}function a(t,e){if(e===t.startContainer||e===t.endContainer)return!0;var n=e.ownerDocument.createRange();n.selectNode(e);var r=t.compareBoundaryPoints(Range.START_TO_START,n)<=0,o=t.compareBoundaryPoints(Range.END_TO_END,n)>=0;return n.detach(),r&&o}function s(t,e){for(var n,r=t.commonAncestorContainer,o=r.ownerDocument.createNodeIterator(r,NodeFilter.SHOW_ALL,null,!1);n=o.nextNode();)a(t,n)&&e(n)}function u(t){var e=/^\s*$/,n=[];s(t,(function(t){t.nodeType!==Node.TEXT_NODE||t.textContent.match(e)||n.push(t)}));var r=[];return n.forEach((function(e){var n=e.ownerDocument.createRange();if(n.selectNodeContents(e),e===t.startContainer&&n.setStart(e,t.startOffset),e===t.endContainer&&n.setEnd(e,t.endOffset),!n.collapsed){var o=Array.from(n.getClientRects());n.detach(),r=r.concat(o)}})),r}Object.defineProperty(n,"__esModule",{value:!0}),n.isSelectionBackwards=i,n.isNodeInRange=a,n.getTextBoundingBoxes=u,n.selectionFocusRect=function(t){if(t.isCollapsed)return null;var e=u(t.getRangeAt(0));return 0===e.length?null:i(t)?e[0]:e[e.length-1]},n.itemsForRange=function(t,e){var n=new Set,o=new Set;return s(t,(function(t){for(var r=t;r&&!n.has(r);){n.add(r);var i=e(r);i&&o.add(i),r=r.parentNode}})),r(o)}},{}],76:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e,n=o.listen(t,["mousedown","mouseup","selectionchange"]).filter((function(t){return"mousedown"===t.type||"mouseup"===t.type?(e="mousedown"===t.type,!1):!e}));return o.merge([o.buffer(10,o.listen(t,["mouseup"])),o.buffer(100,n),o.delay(0,o.Observable.of({}))]).map((function(){return function(t){var e=t.getSelection();return!e.rangeCount||e.getRangeAt(0).collapsed?null:e.getRangeAt(0)}(t)}))};var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(t("./util/observable"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}},{"./util/observable":81}],77:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=t.querySelectorAll("[data-hypothesis-trigger]");function r(t){e(),t.stopPropagation()}Array.from(n).forEach((function(t){t.addEventListener("click",r)}))}},{}],78:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=l(t("hammerjs")),o=l(t("./annotation-counts")),i=l(t("./sidebar-trigger")),a=l(t("../shared/bridge-events")),s=l(t("./features")),u=t("./toolbar");function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=t("./host"),S={Document:{},TextSelection:{},BucketBar:{container:".annotator-frame"}},x=function(t){y(n,E);var e=_(n);function n(t,r){var o;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),("clean"===r.theme||r.externalContainerSelector)&&delete r.pluginClasses.BucketBar,o=e.call(this,t,p(p({},S),r)),(r.openSidebar||r.annotations||r.query||r.group)&&o.on("panelReady",(function(){return o.show()})),o.plugins.BucketBar&&o.plugins.BucketBar.element.on("click",(function(){return o.show()}));var i=document.createElement("div");o.toolbar=new u.ToolbarController(i,{createAnnotation:function(){return o.createAnnotation()},setSidebarOpen:function(t){return t?o.show():o.hide()},setHighlightsVisible:function(t){return o.setAllVisibleHighlights(t)}}),o.toolbar.useMinimalControls="clean"===r.theme,o.frame?(o.frame.prepend(i),o.toolbarWidth=o.toolbar.getWidth()):o.toolbarWidth=0,o._gestureState={initial:null,final:null},o._setupGestures(),o.hide();var a=f(r.services||[],1)[0];return a&&(o.onLoginRequest=a.onLoginRequest,o.onLogoutRequest=a.onLogoutRequest,o.onSignupRequest=a.onSignupRequest,o.onProfileRequest=a.onProfileRequest,o.onHelpRequest=a.onHelpRequest),o.onLayoutChange=r.onLayoutChange,o._notifyOfLayoutChange(!1),o._setupSidebarEvents(),o}return function(t,e,n){e&&v(t.prototype,e),n&&v(t,n)}(n,[{key:"destroy",value:function(){var t;null===(t=this._hammerManager)||void 0===t||t.destroy(),m(w(n.prototype),"destroy",this).call(this)}},{key:"_setupSidebarEvents",value:function(){var t=this;(0,o.default)(document.body,this.crossframe),(0,i.default)(document.body,(function(){return t.show()})),s.default.init(this.crossframe),this.crossframe.on("showSidebar",(function(){return t.show()})),this.crossframe.on("hideSidebar",(function(){return t.hide()})),[[a.default.LOGIN_REQUESTED,this.onLoginRequest],[a.default.LOGOUT_REQUESTED,this.onLogoutRequest],[a.default.SIGNUP_REQUESTED,this.onSignupRequest],[a.default.PROFILE_REQUESTED,this.onProfileRequest],[a.default.HELP_REQUESTED,this.onHelpRequest]].forEach((function(e){var n=f(e,2),r=n[0],o=n[1];o&&t.crossframe.on(r,(function(){return o()}))}))}},{key:"_resetGestureState",value:function(){this._gestureState={initial:null,final:null}}},{key:"_setupGestures",value:function(){var t=this.toolbar.sidebarToggleButton;t&&(t.addEventListener("touchmove",(function(t){return t.preventDefault()})),this._hammerManager=new r.default.Manager(t).on("panstart panend panleft panright",this._onPan.bind(this)),this._hammerManager.add(new r.default.Pan({direction:r.default.DIRECTION_HORIZONTAL})))}},{key:"_updateLayout",value:function(){var t=this;this.renderFrame||(this.renderFrame=requestAnimationFrame((function(){if(t.renderFrame=null,t._gestureState.final!==t._gestureState.initial){var e=t._gestureState.final,n=-e;t.frame.css("margin-left","".concat(e,"px")),n>=280&&t.frame.css("width","".concat(n,"px")),t._notifyOfLayoutChange()}})))}},{key:"_notifyOfLayoutChange",value:function(t){var e=this.frame&&this.toolbar.getWidth()||0,n=this.frame||this.externalFrame,r=n[0].getBoundingClientRect(),o=window.getComputedStyle(n[0]),i=parseInt(o.width),a=parseInt(o.marginLeft),s=e;"boolean"==typeof t?t&&(s+=i):(a<280?s-=a:s+=i,t=s>e);var u={expanded:t,width:t?s:e,height:r.height};this.onLayoutChange&&this.onLayoutChange(u),this.publish("sidebarLayoutChanged",[u])}},{key:"_onPan",value:function(t){if(this.frame)switch(t.type){case"panstart":this._resetGestureState(),this.frame.addClass("annotator-no-transition"),this.frame.css("pointer-events","none"),this._gestureState.initial=parseInt(getComputedStyle(this.frame[0]).marginLeft);break;case"panend":this.frame.removeClass("annotator-no-transition"),this.frame.css("pointer-events",""),null===this._gestureState.final||this._gestureState.final<=-280?this.show():this.hide(),this._resetGestureState();break;case"panleft":case"panright":if("number"!=typeof this._gestureState.initial)return;var e=this._gestureState.initial,n=t.deltaX;this._gestureState.final=Math.min(Math.round(e+n),0),this._updateLayout()}}},{key:"show",value:function(){this.crossframe.call("sidebarOpened"),this.frame&&(this.frame.css("margin-left","".concat(-1*this.frame.width(),"px")),this.frame.removeClass("annotator-collapsed")),this.toolbar.sidebarOpen=!0,"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!0),this._notifyOfLayoutChange(!0)}},{key:"hide",value:function(){this.frame&&(this.frame.css("margin-left",""),this.frame.addClass("annotator-collapsed")),this.toolbar.sidebarOpen=!1,"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!1),this._notifyOfLayoutChange(!1)}},{key:"isOpen",value:function(){return!this.frame||!this.frame.hasClass("annotator-collapsed")}},{key:"setAllVisibleHighlights",value:function(t){this.crossframe.call("setVisibleHighlights",t)}}]),n}();n.default=x},{"../shared/bridge-events":92,"./annotation-counts":51,"./features":60,"./host":64,"./sidebar-trigger":77,"./toolbar":79,hammerjs:32}],79:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ToolbarController=void 0;var r,o=t("preact"),i=(r=t("./components/toolbar"))&&r.__esModule?r:{default:r};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=n.createAnnotation,a=n.setSidebarOpen,s=n.setHighlightsVisible;this._container=e,this._container.className="annotator-toolbar",this._useMinimalControls=!1,this._newAnnotationType="note",this._highlightsVisible=!1,this._sidebarOpen=!1,this._closeSidebar=function(){return a(!1)},this._toggleSidebar=function(){return a(!r._sidebarOpen)},this._toggleHighlights=function(){return s(!r._highlightsVisible)},this._createAnnotation=function(){i(),a(!0)},this._sidebarToggleButton=(0,o.createRef)(),this.render()}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"getWidth",value:function(){return this._container.getBoundingClientRect().width}},{key:"render",value:function(){(0,o.render)((0,o.createElement)(i.default,{closeSidebar:this._closeSidebar,createAnnotation:this._createAnnotation,newAnnotationType:this._newAnnotationType,isSidebarOpen:this._sidebarOpen,showHighlights:this._highlightsVisible,toggleHighlights:this._toggleHighlights,toggleSidebar:this._toggleSidebar,toggleSidebarRef:this._sidebarToggleButton,useMinimalControls:this.useMinimalControls}),this._container)}},{key:"useMinimalControls",set:function(t){this._useMinimalControls=t,this.render()},get:function(){return this._useMinimalControls}},{key:"sidebarOpen",set:function(t){this._sidebarOpen=t,this.render()},get:function(){return this._sidebarOpen}},{key:"newAnnotationType",set:function(t){this._newAnnotationType=t,this.render()},get:function(){return this._newAnnotationType}},{key:"highlightsVisible",set:function(t){this._highlightsVisible=t,this.render()},get:function(){return this._highlightsVisible}},{key:"sidebarToggleButton",get:function(){return this._sidebarToggleButton.current}}]),t}();n.ToolbarController=s},{"./components/toolbar":54,preact:35}],80:[function(t,e,n){"use strict";function r(t){var e=!t.classList.contains("h-sidebar-iframe"),n=t.hasAttribute("enable-annotation");return e&&n}Object.defineProperty(n,"__esModule",{value:!0}),n.findFrames=function(t){return Array.from(t.getElementsByTagName("iframe")).filter(r)},n.hasHypothesis=function(t){return!0===t.contentWindow.__hypothesis_frame},n.injectHypothesis=function(t,e,n){var r=document.createElement("script");r.className="js-hypothesis-config",r.type="application/json",r.innerText=JSON.stringify(n);var o=e,i=document.createElement("script");i.className="js-hypothesis-embed",i.async=!0,i.src=o,t.contentDocument.body.appendChild(r),t.contentDocument.body.appendChild(i)},n.isAccessible=function(t){try{return!!t.contentDocument}catch(t){return!1}},n.isDocumentReady=function(t,e){"loading"===t.contentDocument.readyState?t.contentDocument.addEventListener("DOMContentLoaded",(function(){e()})):e()},n.isLoaded=function(t,e){"complete"!==t.contentDocument.readyState?t.addEventListener("load",(function(){e()})):e()}},{}],81:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.listen=function(t,e){return new o.default((function(n){var r=function(t){n.next(t)};return e.forEach((function(e){t.addEventListener(e,r)})),function(){e.forEach((function(e){t.removeEventListener(e,r)}))}}))},n.delay=function(t,e){return new o.default((function(n){var r=[],o=e.subscribe({next:function(e){var o=setTimeout((function(){r=r.filter((function(t){return t!==o})),n.next(e)}),t);r.push(o)}});return function(){r.forEach(clearTimeout),o.unsubscribe()}}))},n.buffer=function(t,e){return new o.default((function(n){var r,o;function i(){n.next(r)}var a=e.subscribe({next:function(e){r=e,clearTimeout(o),o=setTimeout(i,t)}});return function(){a.unsubscribe(),clearTimeout(o)}}))},n.merge=function(t){return new o.default((function(e){var n=t.map((function(t){return t.subscribe({next:function(t){e.next(t)}})}));return function(){n.forEach((function(t){t.unsubscribe()}))}}))},n.drop=function(t,e){var n=0;return t.filter((function(){return++n>e}))},Object.defineProperty(n,"Observable",{enumerable:!0,get:function(){return o.default}});var r,o=(r=t("zen-observable"))&&r.__esModule?r:{default:r}},{"zen-observable":41}],82:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createShadowRoot=function(t){if(!t.attachShadow)return t;var e=t.attachShadow({mode:"open"});return function(t){var e=Array.from(document.styleSheets).map((function(t){return t.href})).filter((function(t){return(t||"").match(/annotator\.css/)})),n=document.createElement("style");n.textContent=e.map((function(t){return'@import "'.concat(t,'";')})).join("\n"),t.appendChild(n)}(e),e}},{}],83:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeURI=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default,n=new URL(t,e).href;return n.toString().replace(/#.*/,"")};var r,o=(r=t("document-base-uri"))&&r.__esModule?r:{default:r}},{"document-base-uri":5}],84:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path fill="currentColor" fill-rule="nonzero" d="M15 0c.27 0 .505.099.703.297A.961.961 0 0116 1v15l-4-3H1a.974.974 0 01-.703-.29A.953.953 0 010 12V1C0 .719.096.482.29.29A.966.966 0 011 0h14zM7 3l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C4.156 5.229 4 6 4 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188C4.729 8.854 5.082 9 5.5 9c.417 0 .77-.146 1.063-.438C6.854 8.271 7 7.918 7 7.5c0-.417-.146-.77-.438-1.063A1.447 1.447 0 005.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L7 4V3zm5 0l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C9.156 5.229 9 6 9 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188c.291.291.645.437 1.062.437.417 0 .77-.146 1.063-.438.291-.291.437-.645.437-1.062 0-.417-.146-.77-.438-1.063A1.447 1.447 0 0010.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L12 4V3z"/>\n</svg>\n'},{}],85:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false" class="Icon Icon--cancel"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 8l3.536-3.536L8 8 4.464 4.464 8 8zm0 0l-3.536 3.536L8 8l3.536 3.536L8 8z"></path></g></svg>\n'},{}],86:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 12L6 8l4-4"></path></g></svg>\n'},{}],87:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false" class="Icon Icon--caret-right"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 4l4 4-4 4"></path></g></svg>\n'},{}],88:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.73 12.973A9.89 9.89 0 0 1 8 13c-3.866 0-7-2.239-7-5 0-.753.233-1.467.65-2.107m5.62-2.866A9.89 9.89 0 0 1 8 3c3.866 0 7 2.239 7 5 0 .753-.233 1.467-.65 2.107M1 1l14 14L1 1z"></path></g></svg>\n'},{}],89:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15H1h11zm-.5-6v2l-1 1v-2l1-1zm.5-7v6h-2V2h2zm0-1h-2 2zm0 8h-2 2z"></path></g></svg>\n'},{}],90:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 15h6l8-6V1H1v14zm6-1V9h7"></path></g></svg>\n'},{}],91:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 13c3.866 0 7-2.239 7-5s-3.134-5-7-5-7 2.239-7 5 3.134 5 7 5zm0-4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></g></svg>\n'},{}],92:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={FEATURE_FLAGS_UPDATED:"featureFlagsUpdated",HELP_REQUESTED:"helpRequested",LOGIN_REQUESTED:"loginRequested",LOGOUT_REQUESTED:"logoutRequested",PROFILE_REQUESTED:"profileRequested",PUBLIC_ANNOTATION_COUNT_CHANGED:"publicAnnotationCountChanged",SIGNUP_REQUESTED:"signupRequested"}},{}],93:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./frame-rpc"))&&r.__esModule?r:{default:r};function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.links=[],this.channelListeners={},this.onConnectListeners=[]}return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(t,[{key:"destroy",value:function(){Array.from(this.links).map((function(t){return t.channel.destroy()}))}},{key:"createChannel",value:function(t,e,n){var r=this,i=null,a=!1,l=function(){a||(a=!0,Array.from(r.onConnectListeners).forEach((function(e){return e.call(null,i,t)})))},c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({connect:function(t,e){t===n&&(e(),l())}},this.channelListeners);return(i=new o.default(window,t,e,c)).call("connect",n,l),this.links.push({channel:i,window:t}),i}},{key:"call",value:function(t){for(var e,n=this,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];"function"==typeof o[o.length-1]&&(e=o[o.length-1],o=o.slice(0,-1));var s=function(t){return function(e){throw t.destroy(),n.links=Array.from(n.links).filter((function(e){return e.channel!==t})).map((function(t){return t})),e}},u=this.links.map((function(e){return new Promise((function(n,r){var a=setTimeout((function(){return n(null)}),1e3);try{var s;return(s=e.channel).call.apply(s,[t].concat(i(Array.from(o)),[function(t,e){return clearTimeout(a),t?r(t):n(e)}]))}catch(t){return r(t)}})).catch(s(e.channel))})),l=Promise.all(u);return e&&(l=l.then((function(t){return e(null,t)})).catch((function(t){return e(t)}))),l}},{key:"on",value:function(t,e){if(this.channelListeners[t])throw new Error("Listener '".concat(t,"' already bound in Bridge"));return this.channelListeners[t]=e,this}},{key:"off",value:function(t){return delete this.channelListeners[t],this}},{key:"onConnect",value:function(t){return this.onConnectListeners.push(t),this}}]),t}();n.default=c},{"./frame-rpc":98}],94:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeKeyName=function(t){var e={Left:"ArrowLeft",Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Spacebar:" ",Del:"Delete"};return e[t]?e[t]:t}},{}],95:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c,n.registerIcons=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reset,r=void 0!==n&&n;r&&(l={}),Object.assign(l,t)},n.availableIcons=function(){return l};var r=s(t("classnames")),o=t("preact"),i=t("preact/hooks"),a=s(t("prop-types"));function s(t){return t&&t.__esModule?t:{default:t}}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var l={};function c(t){var e=t.name,n=t.className,a=void 0===n?"":n,s=t.inline,c=void 0!==s&&s,f=t.title,h=void 0===f?"":f;if(!l[e])throw new Error('Icon name "'.concat(e,'" is not registered'));var d=l[e],p=(0,i.useRef)();(0,i.useLayoutEffect)((function(){var t=p.current.querySelector("svg");t&&t.setAttribute("class",a)}),[a,d]);var g={};return h&&(g.title=h),(0,o.createElement)("span",u({className:(0,r.default)("svg-icon",{"svg-icon--inline":c}),dangerouslySetInnerHTML:{__html:d},ref:p},g))}c.propTypes={name:a.default.string.isRequired,className:a.default.string,inline:a.default.bool,title:a.default.string}},{classnames:2,preact:35,"preact/hooks":36,"prop-types":38}],96:[function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.target=e,this.server=!1,this.origin="*",this.requestInProgress=!1,this.onDiscovery=null,void 0!==n.server&&(this.server=n.server),void 0!==n.origin&&(this.origin=n.origin),this._onMessage=this._onMessage.bind(this)}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"startDiscovery",value:function(t){if(this.onDiscovery)throw new Error("Discovery is already in progress. Call stopDiscovery() first");this.onDiscovery=t,this.target.addEventListener("message",this._onMessage,!1),this._beacon()}},{key:"stopDiscovery",value:function(){this.onDiscovery=null,this.target.removeEventListener("message",this._onMessage)}},{key:"_beacon",value:function(){var t;t=this.server?"__cross_frame_dhcp_offer":"__cross_frame_dhcp_discovery";for(var e=[this.target.top];e.length>0;){var n=e.shift();n!==this.target&&n.postMessage(t,this.origin);for(var r=0;r<n.frames.length;r++)e.push(n.frames[r])}}},{key:"_onMessage",value:function(t){var e=t.source,n=t.data,o=t.origin;("null"===o||o.match("moz-extension:")||"moz-extension:"===window.location.protocol)&&(o="*");var i="string"==typeof n&&n.match(/^__cross_frame_dhcp_(discovery|offer|request|ack)(?::(\d+))?$/);if(i){var a=r(i,3),s=a[1],u=a[2],l=this._processMessage(s,u,o),c=l.reply,f=l.discovered,h=l.token;c&&e.postMessage("__cross_frame_dhcp_"+c,o),f&&this.onDiscovery&&this.onDiscovery.call(null,e,o,h)}}},{key:"_processMessage",value:function(t,e,n){var r=null,o=!1;if(this.server){if("discovery"===t)r="offer";else if("request"===t)e=this.generateToken(),r="ack:".concat(e),o=!0;else if("offer"===t||"ack"===t)throw new Error("A second Discovery server has been detected at ".concat(n,".\n This is unsupported and will cause unexpected behaviour."))}else"offer"===t?this.requestInProgress||(this.requestInProgress=!0,r="request"):"ack"===t&&(this.requestInProgress=!1,o=!0);return{reply:r,discovered:o,token:e}}},{key:"generateToken",value:function(){return Math.random().toString().replace(/\D/g,"")}}]),t}();n.default=s},{}],97:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.closest=function(t,e){for(;t;){if(t.matches(e))return t;t=t.parentElement}return null}},{}],98:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var o="1.0.0";function i(t,e,n,o){var i=this;if(this.src=t,this.dst=e,"*"===n)this.origin="*";else{var a=new URL(n);this.origin=a.protocol+"//"+a.host}this._sequence=0,this._callbacks={},this._onmessage=function(t){i._destroyed||i.dst===t.source&&("*"!==i.origin&&t.origin!==i.origin||t.data&&"object"===r(t.data)&&"frame-rpc"===t.data.protocol&&Array.isArray(t.data.arguments)&&i._handle(t.data))},this.src.addEventListener("message",this._onmessage),this._methods=("function"==typeof o?o(this):o)||{}}i.prototype.destroy=function(){this._destroyed=!0,this.src.removeEventListener("message",this._onmessage)},i.prototype.call=function(t){var e=[].slice.call(arguments,1);return this.apply(t,e)},i.prototype.apply=function(t,e){if(!this._destroyed){var n=this._sequence++;"function"==typeof e[e.length-1]&&(this._callbacks[n]=e[e.length-1],e=e.slice(0,-1)),this.dst.postMessage({protocol:"frame-rpc",version:o,sequence:n,method:t,arguments:e},this.origin)}},i.prototype._handle=function(t){var e=this;if(!e._destroyed)if(t.hasOwnProperty("method")){if(!this._methods.hasOwnProperty(t.method))return;var n=t.arguments.concat((function(){e.dst.postMessage({protocol:"frame-rpc",version:o,response:t.sequence,arguments:[].slice.call(arguments)},e.origin)}));this._methods[t.method].apply(this._methods,n)}else if(t.hasOwnProperty("response")){var r=this._callbacks[t.response];delete this._callbacks[t.response],r&&r.apply(null,t.arguments)}}},{}],99:[function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0}),n.jsonConfigsFrom=function(t){for(var e={},n=t.querySelectorAll("script.js-hypothesis-config"),o=0;o<n.length;o++){var i=void 0;try{i=JSON.parse(n[o].textContent||"")}catch(t){console.warn("Could not parse settings from js-hypothesis-config tags",t),i={}}r(e,i)}return e}},{}],100:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.matchShortcut=u,n.installShortcut=l,n.useShortcut=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.rootElement,i=void 0===o?document.body:o;(0,r.useEffect)((function(){if(t)return l(t,e,{rootElement:i})}),[t,e,i])};var r=t("preact/hooks"),o=t("./browser-compatibility-utils.js");function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s={alt:1,ctrl:2,meta:4,shift:8};function u(t,e){var n,r=0,a=null,u=i(e.split("+").map((function(t){return t.toLowerCase()})));try{for(u.s();!(n=u.n()).done;){var l=n.value,c=s[l];if(c)r|=c;else{if(null!==a)throw new Error("Multiple non-modifier keys specified");a=l}}}catch(t){u.e(t)}finally{u.f()}if(!a)throw new Error("Invalid shortcut: ".concat(e));return((t.ctrlKey?s.ctrl:0)|(t.metaKey?s.meta:0)|(t.altKey?s.alt:0)|(t.shiftKey?s.shift:0))===r&&(0,o.normalizeKeyName)(t.key).toLowerCase()===a}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.rootElement,o=void 0===r?document.body:r,i=function(n){u(n,t)&&e(n)};return o.addEventListener("keydown",i),function(){return o.removeEventListener("keydown",i)}}},{"./browser-compatibility-utils.js":94,"preact/hooks":36}],101:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.toBoolean=function(t){if("string"==typeof t&&"false"===t.trim().toLocaleLowerCase())return!1;var e=Number(t);return isNaN(e)?"string"==typeof t:Boolean(e)},n.toInteger=function(t){return parseInt(t)},n.toObject=function(t){return"object"===r(t)&&null!==t?t:{}},n.toString=function(t){return t&&"function"==typeof t.toString?t.toString():""}},{}],102:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r={};function o(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n.join();i in r||((t=console).warn.apply(t,n),r[i]=!0)}o.reset=function(){r={}}},{}]},{},[66]);
//# sourceMappingURL=annotator.bundle.js.map