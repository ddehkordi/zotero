(function(a){Drupal.behaviors.myCustomJS={attach:function(t,h){a(".highwire-markup .em-addr",t).each(function(){var t=a(this).html().replace("\{at\}","@"),t="<a href='mailto:"+t+"'>"+t+"</a>";a(this).html(t)})}}})(jQuery);(function(t){Drupal.progressBar=function(r,i,s,e){var a=this;this.id=r;this.method=s||'GET';this.updateCallback=i;this.errorCallback=e;this.element=t('<div class="progress" aria-live="polite"></div>').attr('id',r);this.element.html('<div class="bar"><div class="filled"></div></div><div class="percentage"></div><div class="message">&nbsp;</div>')};Drupal.progressBar.prototype.setProgress=function(r,i){if(r>=0&&r<=100){t('div.filled',this.element).css('width',r+'%');t('div.percentage',this.element).html(r+'%')};t('div.message',this.element).html(i);if(this.updateCallback){this.updateCallback(r,i,this)}};Drupal.progressBar.prototype.startMonitoring=function(t,r){this.delay=r;this.uri=t;this.sendPing()};Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer);this.uri=null};Drupal.progressBar.prototype.sendPing=function(){if(this.timer){clearTimeout(this.timer)};if(this.uri){var r=this;t.ajax({type:this.method,url:this.uri,data:'',dataType:'json',success:function(t){if(t.status==0){r.displayError(t.data);return};r.setProgress(t.percentage,t.message);r.timer=setTimeout(function(){r.sendPing()},r.delay)},error:function(t){r.displayError(Drupal.ajaxError(t,r.uri))}})}};Drupal.progressBar.prototype.displayError=function(r){var i=t('<div class="messages error"></div>').html(r);t(this.element).before(i).hide();if(this.errorCallback){this.errorCallback(this)}}})(jQuery);(function(t){Drupal.behaviors.articleAuthorPopup={attach:function(o,e){var i=!!jQuery.fn.qtip;if(!i){if(window.console){console.error("HW's qTip behavior is called without the qTip library loaded. Please investigate.")};return};var a=(e.instances!=undefined)?t.parseJSON(e.instances):{};t("body",o).delegate(".has-author-tooltip span.highwire-citation-author:not(.hasTooltip):not(.noTooltip)","mouseenter",function(o){var e=t(this),u=e.data("delta"),s=e.parents(".highwire-article-citation"),p=s.attr("id"),n=t("#hw-article-author-popups-"+p+" .author-tooltip-"+u,s),r=e.data("hw-author-tooltip-instance")?e.data("hw-author-tooltip-instance"):"highwire_author_tooltip",i=(a[r]!=undefined)?a[r]:"";if(!i||n.length<=0){e.addClass("noTooltip");return};var h={show:{ready:!0,},position:{viewport:t(window),},events:{show:function(t,o){var e=!0;if(Drupal.highwireResponsive){var a=Drupal.highwireResponsive.getCurrentLayout();e=a!=="mobile"?!0:!1};return e},focus:function(t,o){o.elements.target.addClass("author-popup-hover")},blur:function(t,o){o.elements.target.removeClass("author-popup-hover")},},content:{text:n,}};t.extend(!0,i,h);e.qtip(i,o).addClass("has-tooltip hasTooltip");o.preventDefault()})}}})(jQuery);(function(c){Drupal.behaviors.captcha={attach:function(t){c('#edit-captcha-response').attr('autocomplete','off')}};Drupal.behaviors.captchaAdmin={attach:function(t){c('#edit-captcha-add-captcha-description').click(function(){if(c('#edit-captcha-add-captcha-description').is(':checked')){c('div.form-item-captcha-description').show('slow')}
else{c('div.form-item-captcha-description').hide('slow')}});if(!c('#edit-captcha-add-captcha-description').is(':checked')){c('div.form-item-captcha-description').hide()}}}})(jQuery);(function(e){Drupal.behaviors.textarea={attach:function(t,a){e('.form-textarea-wrapper.resizable',t).once('textarea',function(){var n=null,t=e(this).addClass('resizable-textarea').find('textarea'),i=e('<div class="grippie"></div>').mousedown(r);i.insertAfter(t);function r(i){n=t.height()-i.pageY;t.css('opacity',0.25);e(document).mousemove(u).mouseup(a);return!1};function u(e){t.height(Math.max(32,n+e.pageY)+'px');return!1};function a(n){e(document).unbind('mousemove',u).unbind('mouseup',a);t.css('opacity',1)}})}}})(jQuery);(function(a,c,e){e.behaviors.recaptcha={attach:function(e){a('.g-recaptcha',e).each(function(){if(typeof grecaptcha==='undefined'||typeof grecaptcha.render!=='function'){return};if(a(this).hasClass('recaptcha-processed')){grecaptcha.reset()}
else{if(!a(this).hasClass('recaptcha-processed')){grecaptcha.render(this,a(this).data());a(this).addClass('recaptcha-processed')}}})}};c.drupalRecaptchaOnload=function(){a('.g-recaptcha').each(function(){if(!a(this).hasClass('recaptcha-processed')){grecaptcha.render(this,a(this).data());a(this).addClass('recaptcha-processed')}})}})(jQuery,window,Drupal);